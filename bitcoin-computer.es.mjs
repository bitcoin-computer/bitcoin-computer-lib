import e from"axios";import t from"bitcoinsource";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function r(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function n(e,t,r,n){return new(r||(r=Promise))((function(o,i){function u(e){try{s(n.next(e))}catch(e){i(e)}}function a(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,a)}s((n=n.apply(e,t||[])).next())}))}const o=process.env.BC_CHAIN||"BSV";const i=process.env.BC_NETWORK||"testnet";const u=process.env.BC_WOC_API_KEY;const a=parseInt(process.env.BC_DUST_LIMIT||"",10)||4e3;const s=parseInt(process.env.BC_DEFAULT_FEE||"",10)||("BSV"===o?500:2500);const c=parseInt(process.env.BC_SCRIPT_CHUNK_SIZE||"",10)||479;let l;let f;process.env.BC_BBS_URL?(l=process.env.BC_BBS_URL,f="ws"+process.env.BC_BBS_URL.slice(4)):(l="https://bbs.bitcoincomputer.io",f="wss://bbs.bitcoincomputer.io");var d={CHAIN:o,NETWORK:i,WOC_API_KEY:u,MIN_NON_DUST_AMOUNT:a,SCRIPT_CHUNK_SIZE:c,UN_P2SH_URL:l,WS_URL:f,DEFAULT_FEE:s};t.versionGuard=()=>!0,t.Networks.defaultNetwork=t.Networks[d.NETWORK];class h extends t.Address{constructor(...e){super(...e)}}class p extends t.crypto.BN{constructor(...e){super(...e)}}class v extends t.encoding.BufferReader{constructor(...e){super(...e)}}class y extends t.encoding.BufferWriter{constructor(...e){super(...e)}}class b extends t.Mnemonic{constructor(...e){super(...e)}}class w extends t.HDPrivateKey{constructor(...e){super(...e)}}class _ extends t.Transaction.Input.MultiSigScriptHash{constructor(...e){super(...e)}}class g extends t.Script.Interpreter{constructor(...e){super(...e)}}class m extends t.Opcode{constructor(...e){super(...e)}}class A extends t.Transaction.Input{constructor(...e){super(...e)}}class E extends t.Transaction.Output{constructor(...e){super(...e)}}class O extends t.PrivateKey{constructor(...e){super(...e)}}class S extends t.PublicKey{constructor(...e){super(...e)}}class j extends t.Script{constructor(...e){super(...e)}}class D extends t.Transaction{constructor(...e){super(...e)}}function x(e){try{const t=JSON.parse(e);if("object"!=typeof t)throw new Error("Invalid object");if("string"!=typeof t.txhex)throw new Error("Invalid object");return new D(t.txhex)}catch(e){return null}}function B(e){return n(this,void 0,void 0,(function*(){const{message:t,config:{url:r,method:n,data:o},response:i}=e;const u=x(o);const a="message\t"+t;const s=`request\t${n} ${r}`;const c=u?"transaction\t "+JSON.stringify(u.toJSON(),null,2):"";const l="post"===n?"data\t"+o:"";const f=i?"response\t"+JSON.stringify(i.data):"";const d=u?c:l;throw e.message=`\n    Communication Error\n    ${a}\n    ${s}\n    ${d}\n    ${f}`,e}))}class C{constructor(e,t={}){this.baseUrl=e,this.headers=t}get(t){return n(this,void 0,void 0,(function*(){const r=`${this.baseUrl}${t}`;try{return(yield e.get(r,{headers:this.headers})).data}catch(e){return B(e)}}))}post(t,r){return n(this,void 0,void 0,(function*(){const n=`${this.baseUrl}${t}`;try{return(yield e.post(n,r,{headers:this.headers})).data}catch(e){return B(e)}}))}}var F="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function I(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function T(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return P(e,null==t?r.path:t)}},r.exports),r.exports}function P(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}!function(e,t){if(!e.setImmediate){var r=1;var n={};var o=!1;var i=e.document;var u;var a=Object.getPrototypeOf&&Object.getPrototypeOf(e);var s;var c;var l,f;a=a&&a.setTimeout?a:e,"[object process]"==={}.toString.call(e.process)?u=function(e){process.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0;var r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(l="setImmediate$"+Math.random()+"$",f=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(l)&&h(+t.data.slice(l.length))},e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),u=function(t){e.postMessage(l+t,"*")}):e.MessageChannel?((c=new MessageChannel).port1.onmessage=function(e){h(e.data)},u=function(e){c.port2.postMessage(e)}):i&&"onreadystatechange"in i.createElement("script")?(s=i.documentElement,u=function(e){var t=i.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,s.removeChild(t),t=null},s.appendChild(t)}):u=function(e){setTimeout(h,0,e)},a.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));var t=new Array(arguments.length-1);for(var o=0;o<t.length;o++)t[o]=arguments[o+1];var i={callback:e,args:t};return n[r]=i,u(r),r++},a.clearImmediate=d}function d(e){delete n[e]}function h(e){if(o)setTimeout(h,0,e);else{var t=n[e];if(t){o=!0;try{!function(e){var t=e.callback;var r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{d(e),o=!1}}}}}("undefined"==typeof self?F:self);var N=T((function(e,t){var r=F&&F.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});var n;Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){void 0===t&&(t="A request was aborted, for example through a call to IDBTransaction.abort.");var r=e.call(this)||this;return r.name="AbortError",r.message=t,r}return r(t,e),t}(Error);t.AbortError=o;var i=function(e){function t(t){void 0===t&&(t="A mutation operation in the transaction failed because a constraint was not satisfied. For example, an object such as an object store or index already exists and a request attempted to create a new one.");var r=e.call(this)||this;return r.name="ConstraintError",r.message=t,r}return r(t,e),t}(Error);t.ConstraintError=i;var u=function(e){function t(t){void 0===t&&(t="The data being stored could not be cloned by the internal structured cloning algorithm.");var r=e.call(this)||this;return r.name="DataCloneError",r.message=t,r}return r(t,e),t}(Error);t.DataCloneError=u;var a=function(e){function t(t){void 0===t&&(t="Data provided to an operation does not meet requirements.");var r=e.call(this)||this;return r.name="DataError",r.message=t,r}return r(t,e),t}(Error);t.DataError=a;var s=function(e){function t(t){void 0===t&&(t="An invalid operation was performed on an object. For example transaction creation attempt was made, but an empty scope was provided.");var r=e.call(this)||this;return r.name="InvalidAccessError",r.message=t,r}return r(t,e),t}(Error);t.InvalidAccessError=s;var c=function(e){function t(t){void 0===t&&(t="An operation was called on an object on which it is not allowed or at a time when it is not allowed. Also occurs if a request is made on a source object that has been deleted or removed. Use TransactionInactiveError or ReadOnlyError when possible, as they are more specific variations of InvalidStateError.");var r=e.call(this)||this;return r.name="InvalidStateError",r.message=t,r}return r(t,e),t}(Error);t.InvalidStateError=c;var l=function(e){function t(t){void 0===t&&(t="The operation failed because the requested database object could not be found. For example, an object store did not exist but was being opened.");var r=e.call(this)||this;return r.name="NotFoundError",r.message=t,r}return r(t,e),t}(Error);t.NotFoundError=l;var f=function(e){function t(t){void 0===t&&(t='The mutating operation was attempted in a "readonly" transaction.');var r=e.call(this)||this;return r.name="ReadOnlyError",r.message=t,r}return r(t,e),t}(Error);t.ReadOnlyError=f;var d=function(e){function t(t){void 0===t&&(t="A request was placed against a transaction which is currently not active, or which is finished.");var r=e.call(this)||this;return r.name="TransactionInactiveError",r.message=t,r}return r(t,e),t}(Error);t.TransactionInactiveError=d;var h=function(e){function t(t){void 0===t&&(t="An attempt was made to open a database using a lower version than the existing version.");var r=e.call(this)||this;return r.name="VersionError",r.message=t,r}return r(t,e),t}(Error);t.VersionError=h}));var R=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if("number"==typeof e){if(isNaN(e))throw new N.DataError;return e}if(e instanceof Date){var n=e.valueOf();if(isNaN(n))throw new N.DataError;return new Date(n)}if("string"==typeof e)return e;if(e instanceof ArrayBuffer||"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e))return e instanceof ArrayBuffer?new Uint8Array(e).buffer:new Uint8Array(e.buffer).buffer;if(Array.isArray(e)){if(void 0===t)t=new Set;else if(t.has(e))throw new N.DataError;t.add(e);var o=[];for(var i=0;i<e.length;i++){if(!e.hasOwnProperty(i))throw new N.DataError;var u=e[i];var a=r(u,t);o.push(a)}return o}throw new N.DataError};t.default=r}));var k=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if("number"==typeof e)return"Number";if(e instanceof Date)return"Date";if(Array.isArray(e))return"Array";if("string"==typeof e)return"String";if(e instanceof ArrayBuffer)return"Binary";throw new N.DataError};var n=function(e,t){if(void 0===t)throw new TypeError;e=R.default(e),t=R.default(t);var o=r(e);var i=r(t);if(o!==i)return"Array"===o?1:("Binary"!==o||"String"!==i&&"Date"!==i&&"Number"!==i)&&("String"!==o||"Date"!==i&&"Number"!==i)?"Date"===o&&"Number"===i?1:-1:1;if("Binary"===o&&(e=new Uint8Array(e),t=new Uint8Array(t)),"Array"===o||"Binary"===o){var u=Math.min(e.length,t.length);for(var a=0;a<u;a++){var s=n(e[a],t[a]);if(0!==s)return s}return e.length>t.length?1:e.length<t.length?-1:0}if("Date"===o){if(e.getTime()===t.getTime())return 0}else if(e===t)return 0;return e>t?1:-1};t.default=n}));var M=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r,n){this.lower=e,this.upper=t,this.lowerOpen=r,this.upperOpen=n}return e.only=function(t){if(0===arguments.length)throw new TypeError;return new e(t=R.default(t),t,!1,!1)},e.lowerBound=function(t,r){if(void 0===r&&(r=!1),0===arguments.length)throw new TypeError;return new e(t=R.default(t),void 0,r,!0)},e.upperBound=function(t,r){if(void 0===r&&(r=!1),0===arguments.length)throw new TypeError;return new e(void 0,t=R.default(t),!0,r)},e.bound=function(t,r,n,o){if(void 0===n&&(n=!1),void 0===o&&(o=!1),arguments.length<2)throw new TypeError;var i=k.default(t,r);if(1===i||0===i&&(n||o))throw new N.DataError;return new e(t=R.default(t),r=R.default(r),n,o)},e.prototype.includes=function(e){if(0===arguments.length)throw new TypeError;return e=R.default(e),!(void 0!==this.lower&&(1===(t=k.default(this.lower,e))||0===t&&this.lowerOpen)||void 0!==this.upper&&(-1===(t=k.default(this.upper,e))||0===t&&this.upperOpen));var t},e.prototype.toString=function(){return"[object IDBKeyRange]"},e}();t.default=r}));var U=T((function(e,t){var r=F&&F.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){var o,i;if(Array.isArray(e)){var u=[];try{for(var a=r(e),s=a.next();!s.done;s=a.next()){var c=s.value;null!=c&&"string"!=typeof c&&c.toString&&(c=c.toString()),u.push(R.default(n(c,t)))}}catch(e){o={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return u}if(""===e)return t;var l=e;var f=t;for(;null!==l;){var d=void 0;var h=l.indexOf(".");if(h>=0?(d=l.slice(0,h),l=l.slice(h+1)):(d=l,l=null),!f.hasOwnProperty(d))return;f=f[d]}return f};t.default=n}));var K=T((function(e,t){e.exports=function e(t,r,n){function o(u,a){if(!r[u]){if(!t[u]){var s="function"==typeof P&&P;if(!a&&s)return s(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[u]={exports:{}};t[u][0].call(l.exports,(function(e){return o(t[u][1][e]||e)}),l,l.exports,e,t,r,n)}return r[u].exports}var i="function"==typeof P&&P;for(var u=0;u<n.length;u++)o(n[u]);return o}({1:[function(e,t,r){e("core-js/fn/array/includes"),e("core-js/fn/object/values");var n=e("domexception");var o=e("typeson");var i=e("typeson-registry/dist/presets/structured-cloning-throwing");var u="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:void 0!==F?F:Function("return this;")();u.DOMException||(u.DOMException=n);var a=(new o).register(i);t.exports=function(e){return a.revive(a.encapsulate(e))}},{"core-js/fn/array/includes":2,"core-js/fn/object/values":3,domexception:44,typeson:47,"typeson-registry/dist/presets/structured-cloning-throwing":46}],2:[function(e,t,r){e("../../modules/es7.array.includes"),t.exports=e("../../modules/_core").Array.includes},{"../../modules/_core":9,"../../modules/es7.array.includes":39}],3:[function(e,t,r){e("../../modules/es7.object.values"),t.exports=e("../../modules/_core").Object.values},{"../../modules/_core":9,"../../modules/es7.object.values":40}],4:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],5:[function(e,t,r){var n=e("./_wks")("unscopables");var o=Array.prototype;null==o[n]&&e("./_hide")(o,n,{}),t.exports=function(e){o[n][e]=!0}},{"./_hide":19,"./_wks":38}],6:[function(e,t,r){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":22}],7:[function(e,t,r){var n=e("./_to-iobject");var o=e("./_to-length");var i=e("./_to-absolute-index");t.exports=function(e){return function(t,r,u){var a=n(t);var s=o(a.length);var c=i(u,s);var l;if(e&&r!=r){for(;s>c;)if((l=a[c++])!=l)return!0}else for(;s>c;c++)if((e||c in a)&&a[c]===r)return e||c||0;return!e&&-1}}},{"./_to-absolute-index":32,"./_to-iobject":34,"./_to-length":35}],8:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],9:[function(e,t,r){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},{}],10:[function(e,t,r){var n=e("./_a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":4}],11:[function(e,t,r){t.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},{}],12:[function(e,t,r){t.exports=!e("./_fails")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},{"./_fails":16}],13:[function(e,t,r){var n=e("./_is-object");var o=e("./_global").document;var i=n(o)&&n(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":17,"./_is-object":22}],14:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],15:[function(e,t,r){var n=e("./_global");var o=e("./_core");var i=e("./_hide");var u=e("./_redefine");var a=e("./_ctx");var s=function e(t,r,s){var c=t&e.F;var l=t&e.G;var f=t&e.P;var d=t&e.B;var h=l?n:t&e.S?n[r]||(n[r]={}):(n[r]||{}).prototype;var p=l?o:o[r]||(o[r]={});var v=p.prototype||(p.prototype={});var y,b,w,_;for(y in l&&(s=r),s)w=((b=!c&&h&&void 0!==h[y])?h:s)[y],_=d&&b?a(w,n):f&&"function"==typeof w?a(Function.call,w):w,h&&u(h,y,w,t&e.U),p[y]!=w&&i(p,y,_),f&&v[y]!=w&&(v[y]=w)};n.core=o,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},{"./_core":9,"./_ctx":10,"./_global":17,"./_hide":19,"./_redefine":29}],16:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],17:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],18:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],19:[function(e,t,r){var n=e("./_object-dp");var o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":12,"./_object-dp":23,"./_property-desc":28}],20:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")((function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a}))},{"./_descriptors":12,"./_dom-create":13,"./_fails":16}],21:[function(e,t,r){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":8}],22:[function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=function(e){return"object"===(void 0===e?"undefined":n(e))?null!==e:"function"==typeof e}},{}],23:[function(e,t,r){var n=e("./_an-object");var o=e("./_ie8-dom-define");var i=e("./_to-primitive");var u=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":6,"./_descriptors":12,"./_ie8-dom-define":20,"./_to-primitive":36}],24:[function(e,t,r){var n=e("./_has");var o=e("./_to-iobject");var i=e("./_array-includes")(!1);var u=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r=o(e);var a=0;var s=[];var c;for(c in r)c!=u&&n(r,c)&&s.push(c);for(;t.length>a;)n(r,c=t[a++])&&(~i(s,c)||s.push(c));return s}},{"./_array-includes":7,"./_has":18,"./_shared-key":30,"./_to-iobject":34}],25:[function(e,t,r){var n=e("./_object-keys-internal");var o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,o)}},{"./_enum-bug-keys":14,"./_object-keys-internal":24}],26:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],27:[function(e,t,r){var n=e("./_object-keys");var o=e("./_to-iobject");var i=e("./_object-pie").f;t.exports=function(e){return function(t){var r=o(t);var u=n(r);var a=u.length;var s=0;var c=[];var l;for(;a>s;)i.call(r,l=u[s++])&&c.push(e?[l,r[l]]:r[l]);return c}}},{"./_object-keys":25,"./_object-pie":26,"./_to-iobject":34}],28:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],29:[function(e,t,r){var n=e("./_global");var o=e("./_hide");var i=e("./_has");var u=e("./_uid")("src");var a="toString";var s=Function.toString;var c=(""+s).split(a);e("./_core").inspectSource=function(e){return s.call(e)},(t.exports=function(e,t,r,a){var s="function"==typeof r;s&&(i(r,"name")||o(r,"name",t)),e[t]!==r&&(s&&(i(r,u)||o(r,u,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=r:a?e[t]?e[t]=r:o(e,t,r):(delete e[t],o(e,t,r)))})(Function.prototype,a,(function(){return"function"==typeof this&&this[u]||s.call(this)}))},{"./_core":9,"./_global":17,"./_has":18,"./_hide":19,"./_uid":37}],30:[function(e,t,r){var n=e("./_shared")("keys");var o=e("./_uid");t.exports=function(e){return n[e]||(n[e]=o(e))}},{"./_shared":31,"./_uid":37}],31:[function(e,t,r){var n=e("./_global");var o="__core-js_shared__";var i=n[o]||(n[o]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./_global":17}],32:[function(e,t,r){var n=e("./_to-integer");var o=Math.max;var i=Math.min;t.exports=function(e,t){return(e=n(e))<0?o(e+t,0):i(e,t)}},{"./_to-integer":33}],33:[function(e,t,r){var n=Math.ceil;var o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},{}],34:[function(e,t,r){var n=e("./_iobject");var o=e("./_defined");t.exports=function(e){return n(o(e))}},{"./_defined":11,"./_iobject":21}],35:[function(e,t,r){var n=e("./_to-integer");var o=Math.min;t.exports=function(e){return e>0?o(n(e),9007199254740991):0}},{"./_to-integer":33}],36:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":22}],37:[function(e,t,r){var n=0;var o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},{}],38:[function(e,t,r){var n=e("./_shared")("wks");var o=e("./_uid");var i=e("./_global").Symbol;var u="function"==typeof i;(t.exports=function(e){return n[e]||(n[e]=u&&i[e]||(u?i:o)("Symbol."+e))}).store=n},{"./_global":17,"./_shared":31,"./_uid":37}],39:[function(e,t,r){var n=e("./_export");var o=e("./_array-includes")(!0);n(n.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":5,"./_array-includes":7,"./_export":15}],40:[function(e,t,r){var n=e("./_export");var o=e("./_object-to-array")(!1);n(n.S,"Object",{values:function(e){return o(e)}})},{"./_export":15,"./_object-to-array":27}],41:[function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=e("./legacy-error-codes.json");var i=e("./utils.js");r.implementation=function(){function e(t){var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[];var n=!0;var o=!1;var i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),2!==r.length);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}(e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(t),n=r[0],o=r[1];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.name=o,this.message=n}return n(e,[{key:"code",get:function(){return o[this.name]||0}}]),e}(),r.init=function(e){if(Error.captureStackTrace){var t=i.wrapperForImpl(e);Error.captureStackTrace(t,t.constructor)}}},{"./legacy-error-codes.json":43,"./utils.js":45}],42:[function(e,t,r){var n=e("webidl-conversions");var o=e("./utils.js");var i=o.implSymbol;function u(){var e=[];for(var t=0;t<arguments.length&&t<2;++t)e[t]=arguments[t];void 0!==e[0]?e[0]=n.DOMString(e[0],{context:"Failed to construct 'DOMException': parameter 1"}):e[0]="",void 0!==e[1]?e[1]=n.DOMString(e[1],{context:"Failed to construct 'DOMException': parameter 2"}):e[1]="Error",a.setup(this,e)}Object.defineProperty(u,"prototype",{value:u.prototype,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(u.prototype,"name",{get:function(){return this[i].name},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"message",{get:function(){return this[i].message},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"code",{get:function(){return this[i].code},enumerable:!0,configurable:!0}),Object.defineProperty(u,"INDEX_SIZE_ERR",{value:1,enumerable:!0}),Object.defineProperty(u.prototype,"INDEX_SIZE_ERR",{value:1,enumerable:!0}),Object.defineProperty(u,"DOMSTRING_SIZE_ERR",{value:2,enumerable:!0}),Object.defineProperty(u.prototype,"DOMSTRING_SIZE_ERR",{value:2,enumerable:!0}),Object.defineProperty(u,"HIERARCHY_REQUEST_ERR",{value:3,enumerable:!0}),Object.defineProperty(u.prototype,"HIERARCHY_REQUEST_ERR",{value:3,enumerable:!0}),Object.defineProperty(u,"WRONG_DOCUMENT_ERR",{value:4,enumerable:!0}),Object.defineProperty(u.prototype,"WRONG_DOCUMENT_ERR",{value:4,enumerable:!0}),Object.defineProperty(u,"INVALID_CHARACTER_ERR",{value:5,enumerable:!0}),Object.defineProperty(u.prototype,"INVALID_CHARACTER_ERR",{value:5,enumerable:!0}),Object.defineProperty(u,"NO_DATA_ALLOWED_ERR",{value:6,enumerable:!0}),Object.defineProperty(u.prototype,"NO_DATA_ALLOWED_ERR",{value:6,enumerable:!0}),Object.defineProperty(u,"NO_MODIFICATION_ALLOWED_ERR",{value:7,enumerable:!0}),Object.defineProperty(u.prototype,"NO_MODIFICATION_ALLOWED_ERR",{value:7,enumerable:!0}),Object.defineProperty(u,"NOT_FOUND_ERR",{value:8,enumerable:!0}),Object.defineProperty(u.prototype,"NOT_FOUND_ERR",{value:8,enumerable:!0}),Object.defineProperty(u,"NOT_SUPPORTED_ERR",{value:9,enumerable:!0}),Object.defineProperty(u.prototype,"NOT_SUPPORTED_ERR",{value:9,enumerable:!0}),Object.defineProperty(u,"INUSE_ATTRIBUTE_ERR",{value:10,enumerable:!0}),Object.defineProperty(u.prototype,"INUSE_ATTRIBUTE_ERR",{value:10,enumerable:!0}),Object.defineProperty(u,"INVALID_STATE_ERR",{value:11,enumerable:!0}),Object.defineProperty(u.prototype,"INVALID_STATE_ERR",{value:11,enumerable:!0}),Object.defineProperty(u,"SYNTAX_ERR",{value:12,enumerable:!0}),Object.defineProperty(u.prototype,"SYNTAX_ERR",{value:12,enumerable:!0}),Object.defineProperty(u,"INVALID_MODIFICATION_ERR",{value:13,enumerable:!0}),Object.defineProperty(u.prototype,"INVALID_MODIFICATION_ERR",{value:13,enumerable:!0}),Object.defineProperty(u,"NAMESPACE_ERR",{value:14,enumerable:!0}),Object.defineProperty(u.prototype,"NAMESPACE_ERR",{value:14,enumerable:!0}),Object.defineProperty(u,"INVALID_ACCESS_ERR",{value:15,enumerable:!0}),Object.defineProperty(u.prototype,"INVALID_ACCESS_ERR",{value:15,enumerable:!0}),Object.defineProperty(u,"VALIDATION_ERR",{value:16,enumerable:!0}),Object.defineProperty(u.prototype,"VALIDATION_ERR",{value:16,enumerable:!0}),Object.defineProperty(u,"TYPE_MISMATCH_ERR",{value:17,enumerable:!0}),Object.defineProperty(u.prototype,"TYPE_MISMATCH_ERR",{value:17,enumerable:!0}),Object.defineProperty(u,"SECURITY_ERR",{value:18,enumerable:!0}),Object.defineProperty(u.prototype,"SECURITY_ERR",{value:18,enumerable:!0}),Object.defineProperty(u,"NETWORK_ERR",{value:19,enumerable:!0}),Object.defineProperty(u.prototype,"NETWORK_ERR",{value:19,enumerable:!0}),Object.defineProperty(u,"ABORT_ERR",{value:20,enumerable:!0}),Object.defineProperty(u.prototype,"ABORT_ERR",{value:20,enumerable:!0}),Object.defineProperty(u,"URL_MISMATCH_ERR",{value:21,enumerable:!0}),Object.defineProperty(u.prototype,"URL_MISMATCH_ERR",{value:21,enumerable:!0}),Object.defineProperty(u,"QUOTA_EXCEEDED_ERR",{value:22,enumerable:!0}),Object.defineProperty(u.prototype,"QUOTA_EXCEEDED_ERR",{value:22,enumerable:!0}),Object.defineProperty(u,"TIMEOUT_ERR",{value:23,enumerable:!0}),Object.defineProperty(u.prototype,"TIMEOUT_ERR",{value:23,enumerable:!0}),Object.defineProperty(u,"INVALID_NODE_TYPE_ERR",{value:24,enumerable:!0}),Object.defineProperty(u.prototype,"INVALID_NODE_TYPE_ERR",{value:24,enumerable:!0}),Object.defineProperty(u,"DATA_CLONE_ERR",{value:25,enumerable:!0}),Object.defineProperty(u.prototype,"DATA_CLONE_ERR",{value:25,enumerable:!0}),Object.defineProperty(u.prototype,Symbol.toStringTag,{value:"DOMException",writable:!1,enumerable:!1,configurable:!0});var a={mixedInto:[],is:function(e){if(e){if(e[i]instanceof s.implementation)return!0;for(var r=0;r<t.exports.mixedInto.length;++r)if(e instanceof t.exports.mixedInto[r])return!0}return!1},isImpl:function(e){if(e){if(e instanceof s.implementation)return!0;var r=o.wrapperForImpl(e);for(var n=0;n<t.exports.mixedInto.length;++n)if(r instanceof t.exports.mixedInto[n])return!0}return!1},convert:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).context,n=void 0===r?"The provided value":r;if(t.exports.is(e))return o.implForWrapper(e);throw new TypeError(n+" is not of type 'DOMException'.")},create:function(e,t){var r=Object.create(u.prototype);return this.setup(r,e,t),r},createImpl:function(e,t){var r=Object.create(u.prototype);return this.setup(r,e,t),o.implForWrapper(r)},_internalSetup:function(e){},setup:function(e,t,r){r||(r={}),r.wrapper=e,this._internalSetup(e),Object.defineProperty(e,i,{value:new s.implementation(t,r),writable:!1,enumerable:!1,configurable:!0}),e[i][o.wrapperSymbol]=e,s.init&&s.init(e[i],r)},interface:u,expose:{Window:{DOMException:u},Worker:{DOMException:u}}};t.exports=a;var s=e(".//DOMException-impl.js")},{".//DOMException-impl.js":41,"./utils.js":45,"webidl-conversions":48}],43:[function(e,t,r){t.exports={IndexSizeError:1,DOMStringSizeError:2,HierarchyRequestError:3,WrongDocumentError:4,InvalidCharacterError:5,NoDataAllowedError:6,NoModificationAllowedError:7,NotFoundError:8,NotSupportedError:9,InUseAttributeError:10,InvalidStateError:11,SyntaxError:12,InvalidModificationError:13,NamespaceError:14,InvalidAccessError:15,ValidationError:16,TypeMismatchError:17,SecurityError:18,NetworkError:19,AbortError:20,URLMismatchError:21,QuotaExceededError:22,TimeoutError:23,InvalidNodeTypeError:24,DataCloneError:25}},{}],44:[function(e,t,r){t.exports=e("./DOMException").interface,Object.setPrototypeOf(t.exports.prototype,Error.prototype)},{"./DOMException":42}],45:[function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e){return Object.getPrototypeOf(e)===Buffer.prototype?e:e instanceof ArrayBuffer?Buffer.from(e):Buffer.from(e.buffer,e.byteOffset,e.byteLength)}var i=Symbol("wrapper");var u=Symbol("impl");var a=Symbol("SameObject caches");function s(e){return e?e[i]:null}function c(e){return e?e[u]:null}var l=Symbol("internal");var f=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));t.exports={isObject:function(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e||"function"==typeof e},getReferenceToBytes:o,getCopyToBytes:function(e){return Buffer.from(o(e))},mixin:function(e,t){var r=Object.getOwnPropertyNames(t);for(var n=0;n<r.length;++n)r[n]in e||Object.defineProperty(e,r[n],Object.getOwnPropertyDescriptor(t,r[n]))},wrapperSymbol:i,implSymbol:u,getSameObject:function(e,t,r){return e[a]||(e[a]=Object.create(null)),t in e[a]||(e[a][t]=r()),e[a][t]},wrapperForImpl:s,implForWrapper:c,tryWrapperForImpl:function(e){return s(e)||e},tryImplForWrapper:function(e){return c(e)||e},iterInternalSymbol:l,IteratorPrototype:f}},{}],46:[function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o,i;o=void 0,i=function(){var e="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=Object.keys,o=Array.isArray,i={}.toString,u=Object.getPrototypeOf,a={}.hasOwnProperty,s=a.toString,c=["type","replaced","iterateIn","iterateUnsetNumeric"];function l(e,t){return v.isObject(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function f(e){return i.call(e).slice(8,-1)}function d(t,r){if(!t||"object"!==(void 0===t?"undefined":e(t)))return!1;var n=u(t);if(!n)return!1;var o=a.call(n,"constructor")&&n.constructor;return"function"!=typeof o?null===r:"function"==typeof o&&null!==r&&s.call(o)===s.call(r)}function h(e){return!(!e||"Object"!==f(e))&&(!u(e)||d(e,Object))}function p(t){return t&&"object"===(void 0===t?"undefined":e(t))}function v(n){var i=[],u=[],a={},s=this.types={},f=this.stringify=function(e,t,r,i){i=Object.assign({},n,i,{stringification:!0});var u=A(e,null,i);return o(u)?JSON.stringify(u[0],t,r):u.then((function(e){return JSON.stringify(e,t,r)}))};this.stringifySync=function(e,t,r,n){return f(e,t,r,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.stringifyAsync=function(e,t,r,n){return f(e,t,r,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))};var w=this.parse=function(e,t,r){return r=Object.assign({},n,r,{parse:!0}),E(JSON.parse(e,t),r)};this.parseSync=function(e,t,r){return w(e,t,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.parseAsync=function(e,t,r){return w(e,t,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))},this.specialTypeNames=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.returnTypeNames=!0,this.encapsulate(e,t,r)},this.rootTypeName=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.iterateNone=!0,this.encapsulate(e,t,r)};var A=this.encapsulate=function(s,l,f){var y=(f=Object.assign({sync:!0},n,f)).sync,w={},_=[],g=[],A=[],E=!(f&&"cyclic"in f)||f.cyclic,O=f.encapsulateObserver,S=x("",s,E,l||{},A);function j(e){var t=Object.values(w);if(f.iterateNone)return t.length?t[0]:v.getJSONType(e);if(t.length){if(f.returnTypeNames)return[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(new Set(t)));e&&h(e)&&!e.hasOwnProperty("$types")?e.$types=w:e={$:e,$types:{$:w}}}else p(e)&&e.hasOwnProperty("$types")&&(e={$:e,$types:!0});return!f.returnTypeNames&&e}return A.length?y&&f.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(function e(r,n){return Promise.all(n.map((function(e){return e[1].p}))).then((function(o){return Promise.all(o.map((function(o){var i=[],u=n.splice(0,1)[0],a=t(u,7),s=a[0],c=a[2],l=a[3],f=a[4],h=a[5],p=a[6],v=x(s,o,c,l,i,!0,p),y=d(v,m);return s&&y?v.p.then((function(t){return f[h]=t,e(r,i)})):(s?f[h]=v:r=y?v.p:v,e(r,i))})))})).then((function(){return r}))}(S,A)).then(j):!y&&f.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():f.stringification&&y?[j(S)]:y?j(S):Promise.resolve(j(S));function D(e,t,r){Object.assign(e,t);var n=c.map((function(t){var r=e[t];return delete e[t],r}));r(),c.forEach((function(t,r){e[t]=n[r]}))}function x(t,n,u,a,s,c,l){var p=void 0,y={},A=void 0===n?"undefined":e(n),E=O?function(e){var r=l||a.type||v.getJSONType(n);O(Object.assign(e||y,{keypath:t,value:n,cyclic:u,stateObj:a,promisesData:s,resolvingTypesonPromise:c,awaitingTypesonPromise:d(n,m)},void 0!==r?{type:r}:{}))}:null;if(A in{string:1,boolean:1,number:1,undefined:1})return void 0===n||"number"===A&&(isNaN(n)||n===-1/0||n===1/0)?(p=B(t,n,a,s,!1,c,E))!==n&&(y={replaced:p}):p=n,E&&E(),p;if(null===n)return E&&E(),n;if(u&&!a.iterateIn&&!a.iterateUnsetNumeric){var S=_.indexOf(n);if(!(S<0))return w[t]="#",E&&E({cyclicKeypath:g[S]}),"#"+g[S];!0===u&&(_.push(n),g.push(t))}var j=h(n),C=o(n),F=(j||C)&&(!i.length||a.replaced)||a.iterateIn?n:B(t,n,a,s,j||C,null,E),I=void 0;if(F!==n?(p=F,y={replaced:F}):C||"array"===a.iterateIn?(I=new Array(n.length),y={clone:I}):j||"object"===a.iterateIn?y={clone:I={}}:""===t&&d(n,m)?(s.push([t,n,u,a,void 0,void 0,a.type]),p=n):p=n,E&&E(),f.iterateNone)return I||p;if(!I)return p;if(a.iterateIn){var T=function(e){var r={ownKeys:n.hasOwnProperty(e)};D(a,r,(function(){var r=t+(t?".":"")+b(e),o=x(r,n[e],!!u,a,s,c);d(o,m)?s.push([r,o,!!u,a,I,e,a.type]):void 0!==o&&(I[e]=o)}))};for(var P in n)T(P);E&&E({endIterateIn:!0,end:!0})}else r(n).forEach((function(e){var r=t+(t?".":"")+b(e);D(a,{ownKeys:!0},(function(){var t=x(r,n[e],!!u,a,s,c);d(t,m)?s.push([r,t,!!u,a,I,e,a.type]):void 0!==t&&(I[e]=t)}))})),E&&E({endIterateOwn:!0,end:!0});if(a.iterateUnsetNumeric){for(var N=n.length,R=function(e){if(!(e in n)){var r=t+(t?".":"")+e;D(a,{ownKeys:!1},(function(){var t=x(r,void 0,!!u,a,s,c);d(t,m)?s.push([r,t,!!u,a,I,e,a.type]):void 0!==t&&(I[e]=t)}))}},k=0;k<N;k++)R(k);E&&E({endIterateUnsetNumeric:!0,end:!0})}return I}function B(e,t,r,n,o,s,c){for(var l=o?i:u,f=l.length;f--;){var d=l[f];if(d.test(t,r)){var h=d.type;if(a[h]){var p=w[e];w[e]=p?[h].concat(p):h}return Object.assign(r,{type:h,replaced:!0}),!y&&d.replaceAsync||d.replace?(c&&c({replacing:!0}),x(e,d[y||!d.replaceAsync?"replace":"replaceAsync"](t,r),E&&"readonly",r,n,s,h)):(c&&c({typeDetected:!0}),x(e,t,E&&"readonly",r,n,s,h))}}return t}};this.encapsulateSync=function(e,t,r){return A(e,t,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.encapsulateAsync=function(e,t,r){return A(e,t,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))};var E=this.revive=function(e,i){var u=(i=Object.assign({sync:!0},n,i)).sync,s=e&&e.$types,c=!0;if(!s)return e;if(!0===s)return e.$;s.$&&h(s.$)&&(e=e.$,s=s.$,c=!1);var f=[],p={},v=function e(n,i,u,l,v,y){if(!c||"$types"!==n){var w=s[n];if(o(i)||h(i)){var m=o(i)?new Array(i.length):{};for(r(i).forEach((function(t){var r=e(n+(n?".":"")+b(t),i[t],u||m,l,m,t);d(r,g)?m[t]=void 0:void 0!==r&&(m[t]=r)})),i=m;f.length;){var A=t(f[0],4),E=A[0],O=A[1],S=A[2],j=A[3],D=_(E,O);if(d(D,g))S[j]=void 0;else{if(void 0===D)break;S[j]=D}f.splice(0,1)}}if(!w)return i;if("#"===w){var x=_(u,i.substr(1));return void 0===x&&f.push([u,i.substr(1),v,y]),x}var B=l.sync;return[].concat(w).reduce((function(e,t){var r=a[t];if(!r)throw new Error("Unregistered type: "+t);return r[B&&r.revive?"revive":!B&&r.reviveAsync?"reviveAsync":"revive"](e,p)}),i)}}("",e,null,i);return l(v=d(v,g)?void 0:v)?u&&i.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():v:!u&&i.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():u?v:Promise.resolve(v)};this.reviveSync=function(e,t){return E(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.reviveAsync=function(e,t){return E(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))},this.register=function(e,t){return t=t||{},[].concat(e).forEach((function e(n){if(o(n))return n.map(e);n&&r(n).forEach((function(e){if("#"===e)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(v.JSON_TYPES.includes(e))throw new TypeError("Plain JSON object types are reserved as type names");var r=n[e],c=r.testPlainObjects?i:u,l=c.filter((function(t){return t.type===e}));if(l.length&&(c.splice(c.indexOf(l[0]),1),delete a[e],delete s[e]),r){if("function"==typeof r){var f=r;r={test:function(e){return e&&e.constructor===f},replace:function(e){return y({},e)},revive:function(e){return y(Object.create(f.prototype),e)}}}else o(r)&&(r={test:r[0],replace:r[1],revive:r[2]});var d={type:e,test:r.test.bind(r)};r.replace&&(d.replace=r.replace.bind(r)),r.replaceAsync&&(d.replaceAsync=r.replaceAsync.bind(r));var h="number"==typeof t.fallback?t.fallback:t.fallback?0:1/0;if(r.testPlainObjects?i.splice(h,0,d):u.splice(h,0,d),r.revive||r.reviveAsync){var p={};r.revive&&(p.revive=r.revive.bind(r)),r.reviveAsync&&(p.reviveAsync=r.reviveAsync.bind(r)),a[e]=p}s[e]=r}}))})),this}}function y(e,t){return r(t).map((function(r){e[r]=t[r]})),e}function b(e){return e.replace(/~/g,"~0").replace(/\./g,"~1")}function w(e){return e.replace(/~1/g,".").replace(/~0/g,"~")}function _(e,t){if(""===t)return e;var r=t.indexOf(".");if(r>-1){var n=e[w(t.substr(0,r))];return void 0===n?void 0:_(n,t.substr(r+1))}return e[w(t)]}function g(){}function m(e){this.p=new Promise(e)}m.prototype.then=function(e,t){var r=this;return new m((function(n,o){r.p.then((function(t){n(e?e(t):t)}),(function(e){r.p.catch((function(e){return t?t(e):Promise.reject(e)})).then(n,o)}))}))},m.prototype.catch=function(e){return this.then(null,e)},m.resolve=function(e){return new m((function(t){t(e)}))},m.reject=function(e){return new m((function(t,r){r(e)}))},["all","race"].map((function(e){m[e]=function(t){return new m((function(r,n){Promise[e](t.map((function(e){return e.p}))).then(r,n)}))}})),v.Undefined=g,v.Promise=m,v.isThenable=l,v.toStringTag=f,v.hasConstructorOf=d,v.isObject=p,v.isPlainObject=h,v.isUserObject=function e(t){if(!t||"Object"!==f(t))return!1;var r=u(t);return!r||d(t,Object)||e(r)},v.escapeKeyPathComponent=b,v.unescapeKeyPathComponent=w,v.getByKeyPath=_,v.getJSONType=function(t){return null===t?"null":o(t)?"array":void 0===t?"undefined":e(t)},v.JSON_TYPES=["null","boolean","number","string","array","object"];for(var A={userObject:{test:function(e,t){return v.isUserObject(e)},replace:function(e){return Object.assign({},e)},revive:function(e){return e}}},E=[[{sparseArrays:{testPlainObjects:!0,test:function(e){return Array.isArray(e)},replace:function(e,t){return t.iterateUnsetNumeric=!0,e}}},{sparseUndefined:{test:function(e,t){return void 0===e&&!1===t.ownKeys},replace:function(e){return null},revive:function(e){}}}],{undef:{test:function(e,t){return void 0===e&&(t.ownKeys||!("ownKeys"in t))},replace:function(e){return null},revive:function(e){return new v.Undefined}}}],O={StringObject:{test:function(t){return"String"===v.toStringTag(t)&&"object"===(void 0===t?"undefined":e(t))},replace:function(e){return String(e)},revive:function(e){return new String(e)}},BooleanObject:{test:function(t){return"Boolean"===v.toStringTag(t)&&"object"===(void 0===t?"undefined":e(t))},replace:function(e){return Boolean(e)},revive:function(e){return new Boolean(e)}},NumberObject:{test:function(t){return"Number"===v.toStringTag(t)&&"object"===(void 0===t?"undefined":e(t))},replace:function(e){return Number(e)},revive:function(e){return new Number(e)}}},S=[{nan:{test:function(e){return"number"==typeof e&&isNaN(e)},replace:function(e){return"NaN"},revive:function(e){return NaN}}},{infinity:{test:function(e){return e===1/0},replace:function(e){return"Infinity"},revive:function(e){return 1/0}}},{negativeInfinity:{test:function(e){return e===-1/0},replace:function(e){return"-Infinity"},revive:function(e){return-1/0}}}],j={date:{test:function(e){return"Date"===v.toStringTag(e)},replace:function(e){var t=e.getTime();return isNaN(t)?"NaN":t},revive:function(e){return"NaN"===e?new Date(NaN):new Date(e)}}},D={regexp:{test:function(e){return"RegExp"===v.toStringTag(e)},replace:function(e){return{source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")}},revive:function(e){var t=e.source,r=e.flags;return new RegExp(t,r)}}},x={map:{test:function(e){return"Map"===v.toStringTag(e)},replace:function(e){return Array.from(e.entries())},revive:function(e){return new Map(e)}}},B={set:{test:function(e){return"Set"===v.toStringTag(e)},replace:function(e){return Array.from(e.values())},revive:function(e){return new Set(e)}}},C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=new Uint8Array(256),T=0;T<C.length;T++)I[C.charCodeAt(T)]=T;var P=function(e,t,r){for(var n=new Uint8Array(e,t,r),o=n.length,i="",u=0;u<o;u+=3)i+=C[n[u]>>2],i+=C[(3&n[u])<<4|n[u+1]>>4],i+=C[(15&n[u+1])<<2|n[u+2]>>6],i+=C[63&n[u+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},N=function(e){var t=e.length,r=.75*e.length,n=0,o=void 0,i=void 0,u=void 0,a=void 0;"="===e[e.length-1]&&(r--,"="===e[e.length-2]&&r--);for(var s=new ArrayBuffer(r),c=new Uint8Array(s),l=0;l<t;l+=4)o=I[e.charCodeAt(l)],i=I[e.charCodeAt(l+1)],u=I[e.charCodeAt(l+2)],a=I[e.charCodeAt(l+3)],c[n++]=o<<2|i>>4,c[n++]=(15&i)<<4|u>>2,c[n++]=(3&u)<<6|63&a;return s},R={arraybuffer:{test:function(e){return"ArrayBuffer"===v.toStringTag(e)},replace:function(e,t){t.buffers||(t.buffers=[]);var r=t.buffers.indexOf(e);return r>-1?{index:r}:(t.buffers.push(e),P(e))},revive:function(t,r){if(r.buffers||(r.buffers=[]),"object"===(void 0===t?"undefined":e(t)))return r.buffers[t.index];var n=N(t);return r.buffers.push(n),n}}},k="undefined"==typeof self?F:self,M={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((function(e){var t=e,r=k[t];r&&(M[e.toLowerCase()]={test:function(e){return v.toStringTag(e)===t},replace:function(e,t){var r=e.buffer,n=e.byteOffset,o=e.length;t.buffers||(t.buffers=[]);var i=t.buffers.indexOf(r);return i>-1?{index:i,byteOffset:n,length:o}:(t.buffers.push(r),{encoded:P(r),byteOffset:n,length:o})},revive:function(e,t){t.buffers||(t.buffers=[]);var n=e.byteOffset,o=e.length,i=e.encoded,u=e.index,a=void 0;return"index"in e?a=t.buffers[u]:(a=N(i),t.buffers.push(a)),new r(a,n,o)}})}));var U={dataview:{test:function(e){return"DataView"===v.toStringTag(e)},replace:function(e,t){var r=e.buffer,n=e.byteOffset,o=e.byteLength;t.buffers||(t.buffers=[]);var i=t.buffers.indexOf(r);return i>-1?{index:i,byteOffset:n,byteLength:o}:(t.buffers.push(r),{encoded:P(r),byteOffset:n,byteLength:o})},revive:function(e,t){t.buffers||(t.buffers=[]);var r=e.byteOffset,n=e.byteLength,o=e.encoded,i=e.index,u=void 0;return"index"in e?u=t.buffers[i]:(u=N(o),t.buffers.push(u)),new DataView(u,r,n)}}},K={IntlCollator:{test:function(e){return v.hasConstructorOf(e,Intl.Collator)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.Collator(e.locale,e)}},IntlDateTimeFormat:{test:function(e){return v.hasConstructorOf(e,Intl.DateTimeFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function(e){return v.hasConstructorOf(e,Intl.NumberFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.NumberFormat(e.locale,e)}}},V={file:{test:function(e){return"File"===v.toStringTag(e)},replace:function(e){var t=new XMLHttpRequest;if(t.open("GET",URL.createObjectURL(e),!1),200!==t.status&&0!==t.status)throw new Error("Bad Blob access: "+t.status);return t.send(),{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:function(e){var t=e.name,r=e.type,n=e.stringContents,o=e.lastModified;return new File([n],t,{type:r,lastModified:o})},replaceAsync:function(e){return new v.Promise((function(t,r){if(e.isClosed)r(new Error("The File is closed"));else{var n=new FileReader;n.addEventListener("load",(function(){t({type:e.type,stringContents:n.result,name:e.name,lastModified:e.lastModified})})),n.addEventListener("error",(function(){r(n.error)})),n.readAsText(e)}}))}}};return[A,E,O,S,j,D,{imagedata:{test:function(e){return"ImageData"===v.toStringTag(e)},replace:function(e){return{array:Array.from(e.data),width:e.width,height:e.height}},revive:function(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},{imagebitmap:{test:function(e){return"ImageBitmap"===v.toStringTag(e)||e&&e.dataset&&"ImageBitmap"===e.dataset.toStringTag},replace:function(e){var t=document.createElement("canvas");return t.getContext("2d").drawImage(e,0,0),t.toDataURL()},revive:function(e){var t=document.createElement("canvas"),r=t.getContext("2d"),n=document.createElement("img");return n.onload=function(){r.drawImage(n,0,0)},n.src=e,t},reviveAsync:function(e){var t=document.createElement("canvas"),r=t.getContext("2d"),n=document.createElement("img");return n.onload=function(){r.drawImage(n,0,0)},n.src=e,createImageBitmap(t)}}},V,{file:V.file,filelist:{test:function(e){return"FileList"===v.toStringTag(e)},replace:function(e){for(var t=[],r=0;r<e.length;r++)t[r]=e.item(r);return t},revive:function(e){function t(){this._files=arguments[0],this.length=this._files.length}return t.prototype.item=function(e){return this._files[e]},t.prototype[Symbol.toStringTag]="FileList",new t(e)}}},{blob:{test:function(e){return"Blob"===v.toStringTag(e)},replace:function(e){var t=new XMLHttpRequest;if(t.open("GET",URL.createObjectURL(e),!1),200!==t.status&&0!==t.status)throw new Error("Bad Blob access: "+t.status);return t.send(),{type:e.type,stringContents:t.responseText}},revive:function(e){var t=e.type,r=e.stringContents;return new Blob([r],{type:t})},replaceAsync:function(e){return new v.Promise((function(t,r){if(e.isClosed)r(new Error("The Blob is closed"));else{var n=new FileReader;n.addEventListener("load",(function(){t({type:e.type,stringContents:n.result})})),n.addEventListener("error",(function(){r(n.error)})),n.readAsText(e)}}))}}}].concat("function"==typeof Map?x:[],"function"==typeof Set?B:[],"function"==typeof ArrayBuffer?R:[],"function"==typeof Uint8Array?M:[],"function"==typeof DataView?U:[],"undefined"!=typeof Intl?K:[]).concat({checkDataCloneException:[function(t){var r={}.toString.call(t).slice(8,-1);if(["symbol","function"].includes(void 0===t?"undefined":e(t))||["Arguments","Module","Error","Promise","WeakMap","WeakSet"].includes(r)||t===Object.prototype||("Blob"===r||"File"===r)&&t.isClosed||t&&"object"===(void 0===t?"undefined":e(t))&&"number"==typeof t.nodeType&&"function"==typeof t.insertBefore)throw new DOMException("The object cannot be cloned.","DataCloneError");return!1}]})},"object"==(void 0===r?"undefined":n(r))&&void 0!==t?t.exports=i():(o.Typeson=o.Typeson||{},o.Typeson.presets=o.Typeson.presets||{},o.Typeson.presets.structuredCloningThrowing=i())},{}],47:[function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=Object.keys,a=Array.isArray,s={}.toString,c=Object.getPrototypeOf,l={}.hasOwnProperty,f=l.toString,d=["type","replaced","iterateIn","iterateUnsetNumeric"];function h(e,t){return w.isObject(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function p(e){return s.call(e).slice(8,-1)}function v(e,t){if(!e||"object"!==(void 0===e?"undefined":o(e)))return!1;var r=c(e);if(!r)return!1;var n=l.call(r,"constructor")&&r.constructor;return"function"!=typeof n?null===t:"function"==typeof n&&null!==t&&f.call(n)===f.call(t)}function y(e){return!(!e||"Object"!==p(e))&&(!c(e)||v(e,Object))}function b(e){return e&&"object"===(void 0===e?"undefined":o(e))}function w(e){var t=[],r=[],n={},s=this.types={},c=this.stringify=function(t,r,n,o){o=Object.assign({},e,o,{stringification:!0});var i=f(t,null,o);return a(i)?JSON.stringify(i[0],r,n):i.then((function(e){return JSON.stringify(e,r,n)}))};this.stringifySync=function(e,t,r,n){return c(e,t,r,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.stringifyAsync=function(e,t,r,n){return c(e,t,r,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))};var l=this.parse=function(t,r,n){return n=Object.assign({},e,n,{parse:!0}),p(JSON.parse(t,r),n)};this.parseSync=function(e,t,r){return l(e,t,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.parseAsync=function(e,t,r){return l(e,t,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))},this.specialTypeNames=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.returnTypeNames=!0,this.encapsulate(e,t,r)},this.rootTypeName=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.iterateNone=!0,this.encapsulate(e,t,r)};var f=this.encapsulate=function(s,c,l){var f=(l=Object.assign({sync:!0},e,l)).sync,h={},p=[],_=[],m=[],A=!(l&&"cyclic"in l)||l.cyclic,E=l.encapsulateObserver,S=x("",s,A,c||{},m);function j(e){var t=Object.values(h);if(l.iterateNone)return t.length?t[0]:w.getJSONType(e);if(t.length){if(l.returnTypeNames)return[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(new Set(t)));e&&y(e)&&!e.hasOwnProperty("$types")?e.$types=h:e={$:e,$types:{$:h}}}else b(e)&&e.hasOwnProperty("$types")&&(e={$:e,$types:!0});return!l.returnTypeNames&&e}return m.length?f&&l.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(function e(t,r){return Promise.all(r.map((function(e){return e[1].p}))).then((function(n){return Promise.all(n.map((function(n){var o=[],u=r.splice(0,1)[0],a=i(u,7),s=a[0],c=a[2],l=a[3],f=a[4],d=a[5],h=a[6],p=x(s,n,c,l,o,!0,h),y=v(p,O);return s&&y?p.p.then((function(r){return f[d]=r,e(t,o)})):(s?f[d]=p:t=y?p.p:p,e(t,o))})))})).then((function(){return t}))}(S,m)).then(j):!f&&l.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():l.stringification&&f?[j(S)]:f?j(S):Promise.resolve(j(S));function D(e,t,r){Object.assign(e,t);var n=d.map((function(t){var r=e[t];return delete e[t],r}));r(),d.forEach((function(t,r){e[t]=n[r]}))}function x(e,r,n,i,s,c,f){var d=void 0,b={},m=void 0===r?"undefined":o(r),A=E?function(t){var o=f||i.type||w.getJSONType(r);E(Object.assign(t||b,{keypath:e,value:r,cyclic:n,stateObj:i,promisesData:s,resolvingTypesonPromise:c,awaitingTypesonPromise:v(r,O)},void 0!==o?{type:o}:{}))}:null;if(m in{string:1,boolean:1,number:1,undefined:1})return void 0===r||"number"===m&&(isNaN(r)||r===-1/0||r===1/0)?(d=B(e,r,i,s,!1,c,A))!==r&&(b={replaced:d}):d=r,A&&A(),d;if(null===r)return A&&A(),r;if(n&&!i.iterateIn&&!i.iterateUnsetNumeric){var S=p.indexOf(r);if(!(S<0))return h[e]="#",A&&A({cyclicKeypath:_[S]}),"#"+_[S];!0===n&&(p.push(r),_.push(e))}var j=y(r),C=a(r),F=(j||C)&&(!t.length||i.replaced)||i.iterateIn?r:B(e,r,i,s,j||C,null,A),I=void 0;if(F!==r?(d=F,b={replaced:F}):C||"array"===i.iterateIn?(I=new Array(r.length),b={clone:I}):j||"object"===i.iterateIn?b={clone:I={}}:""===e&&v(r,O)?(s.push([e,r,n,i,void 0,void 0,i.type]),d=r):d=r,A&&A(),l.iterateNone)return I||d;if(!I)return d;if(i.iterateIn){var T=function(t){var o={ownKeys:r.hasOwnProperty(t)};D(i,o,(function(){var o=e+(e?".":"")+g(t),u=x(o,r[t],!!n,i,s,c);v(u,O)?s.push([o,u,!!n,i,I,t,i.type]):void 0!==u&&(I[t]=u)}))};for(var P in r)T(P);A&&A({endIterateIn:!0,end:!0})}else u(r).forEach((function(t){var o=e+(e?".":"")+g(t);D(i,{ownKeys:!0},(function(){var e=x(o,r[t],!!n,i,s,c);v(e,O)?s.push([o,e,!!n,i,I,t,i.type]):void 0!==e&&(I[t]=e)}))})),A&&A({endIterateOwn:!0,end:!0});if(i.iterateUnsetNumeric){for(var N=r.length,R=function(t){if(!(t in r)){var o=e+(e?".":"")+t;D(i,{ownKeys:!1},(function(){var e=x(o,void 0,!!n,i,s,c);v(e,O)?s.push([o,e,!!n,i,I,t,i.type]):void 0!==e&&(I[t]=e)}))}},k=0;k<N;k++)R(k);A&&A({endIterateUnsetNumeric:!0,end:!0})}return I}function B(e,o,i,u,a,s,c){for(var l=a?t:r,d=l.length;d--;){var p=l[d];if(p.test(o,i)){var v=p.type;if(n[v]){var y=h[e];h[e]=y?[v].concat(y):v}return Object.assign(i,{type:v,replaced:!0}),!f&&p.replaceAsync||p.replace?(c&&c({replacing:!0}),x(e,p[f||!p.replaceAsync?"replace":"replaceAsync"](o,i),A&&"readonly",i,u,s,v)):(c&&c({typeDetected:!0}),x(e,o,A&&"readonly",i,u,s,v))}}return o}};this.encapsulateSync=function(e,t,r){return f(e,t,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.encapsulateAsync=function(e,t,r){return f(e,t,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))};var p=this.revive=function(t,r){var o=(r=Object.assign({sync:!0},e,r)).sync,s=t&&t.$types,c=!0;if(!s)return t;if(!0===s)return t.$;s.$&&y(s.$)&&(t=t.$,s=s.$,c=!1);var l=[],f={},d=function e(t,r,o,d,h,p){if(!c||"$types"!==t){var b=s[t];if(a(r)||y(r)){var w=a(r)?new Array(r.length):{};for(u(r).forEach((function(n){var i=e(t+(t?".":"")+g(n),r[n],o||w,d,w,n);v(i,E)?w[n]=void 0:void 0!==i&&(w[n]=i)})),r=w;l.length;){var _=i(l[0],4),m=_[0],O=_[1],S=_[2],j=_[3],D=A(m,O);if(v(D,E))S[j]=void 0;else{if(void 0===D)break;S[j]=D}l.splice(0,1)}}if(!b)return r;if("#"===b){var x=A(o,r.substr(1));return void 0===x&&l.push([o,r.substr(1),h,p]),x}var B=d.sync;return[].concat(b).reduce((function(e,t){var r=n[t];if(!r)throw new Error("Unregistered type: "+t);return r[B&&r.revive?"revive":!B&&r.reviveAsync?"reviveAsync":"revive"](e,f)}),r)}}("",t,null,r);return h(d=v(d,E)?void 0:d)?o&&r.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():d:!o&&r.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():o?d:Promise.resolve(d)};this.reviveSync=function(e,t){return p(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.reviveAsync=function(e,t){return p(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))},this.register=function(e,o){return o=o||{},[].concat(e).forEach((function e(i){if(a(i))return i.map(e);i&&u(i).forEach((function(e){if("#"===e)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(w.JSON_TYPES.includes(e))throw new TypeError("Plain JSON object types are reserved as type names");var u=i[e],c=u.testPlainObjects?t:r,l=c.filter((function(t){return t.type===e}));if(l.length&&(c.splice(c.indexOf(l[0]),1),delete n[e],delete s[e]),u){if("function"==typeof u){var f=u;u={test:function(e){return e&&e.constructor===f},replace:function(e){return _({},e)},revive:function(e){return _(Object.create(f.prototype),e)}}}else a(u)&&(u={test:u[0],replace:u[1],revive:u[2]});var d={type:e,test:u.test.bind(u)};u.replace&&(d.replace=u.replace.bind(u)),u.replaceAsync&&(d.replaceAsync=u.replaceAsync.bind(u));var h="number"==typeof o.fallback?o.fallback:o.fallback?0:1/0;if(u.testPlainObjects?t.splice(h,0,d):r.splice(h,0,d),u.revive||u.reviveAsync){var p={};u.revive&&(p.revive=u.revive.bind(u)),u.reviveAsync&&(p.reviveAsync=u.reviveAsync.bind(u)),n[e]=p}s[e]=u}}))})),this}}function _(e,t){return u(t).map((function(r){e[r]=t[r]})),e}function g(e){return e.replace(/~/g,"~0").replace(/\./g,"~1")}function m(e){return e.replace(/~1/g,".").replace(/~0/g,"~")}function A(e,t){if(""===t)return e;var r=t.indexOf(".");if(r>-1){var n=e[m(t.substr(0,r))];return void 0===n?void 0:A(n,t.substr(r+1))}return e[m(t)]}function E(){}function O(e){this.p=new Promise(e)}O.prototype.then=function(e,t){var r=this;return new O((function(n,o){r.p.then((function(t){n(e?e(t):t)}),(function(e){r.p.catch((function(e){return t?t(e):Promise.reject(e)})).then(n,o)}))}))},O.prototype.catch=function(e){return this.then(null,e)},O.resolve=function(e){return new O((function(t){t(e)}))},O.reject=function(e){return new O((function(t,r){r(e)}))},["all","race"].map((function(e){O[e]=function(t){return new O((function(r,n){Promise[e](t.map((function(e){return e.p}))).then(r,n)}))}})),w.Undefined=E,w.Promise=O,w.isThenable=h,w.toStringTag=p,w.hasConstructorOf=v,w.isObject=b,w.isPlainObject=y,w.isUserObject=function e(t){if(!t||"Object"!==p(t))return!1;var r=c(t);return!r||v(t,Object)||e(r)},w.escapeKeyPathComponent=g,w.unescapeKeyPathComponent=m,w.getByKeyPath=A,w.getJSONType=function(e){return null===e?"null":a(e)?"array":void 0===e?"undefined":o(e)},w.JSON_TYPES=["null","boolean","number","string","array","object"],t.exports=w},{}],48:[function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){return(t&&t.context?t.context:"Value")+" "+e+"."}function i(e){return a(Math.trunc(e))}function u(e){return e<0?-1:1}function a(e){return 0===e?0:e}function s(e,t){var r=!t.unsigned;var n=void 0;var s=void 0;64===e?(s=Math.pow(2,53)-1,n=r?1-Math.pow(2,53):0):r?(n=-Math.pow(2,e-1),s=Math.pow(2,e-1)-1):(n=0,s=Math.pow(2,e)-1);var c=Math.pow(2,e);var l=Math.pow(2,e-1);return function(e,t){void 0===t&&(t={});var f=+e;if(f=a(f),t.enforceRange){if(!Number.isFinite(f))throw new TypeError(o("is not a finite number",t));if((f=i(f))<n||f>s)throw new TypeError(o("is outside the accepted range of "+n+" to "+s+", inclusive",t));return f}return!Number.isNaN(f)&&t.clamp?f=function(e){return a(e>0&&e%1==.5&&0==(1&e)||e<0&&e%1==-.5&&1==(1&e)?Math.floor(e):Math.round(e))}(f=Math.min(Math.max(f,n),s)):Number.isFinite(f)&&0!==f?(f=i(f))>=n&&f<=s?f:(f=function(e,t){var r=e%t;return u(t)!==u(r)?r+t:r}(f,c),r&&f>=l?f-c:f):0}}function c(e,t){if("function"!=typeof e)throw new TypeError(o("is not a function",t));return e}r.any=function(e){return e},r.void=function(){},r.boolean=function(e){return!!e},r.byte=s(8,{unsigned:!1}),r.octet=s(8,{unsigned:!0}),r.short=s(16,{unsigned:!1}),r["unsigned short"]=s(16,{unsigned:!0}),r.long=s(32,{unsigned:!1}),r["unsigned long"]=s(32,{unsigned:!0}),r["long long"]=s(64,{unsigned:!1}),r["unsigned long long"]=s(64,{unsigned:!0}),r.double=function(e,t){var r=+e;if(!Number.isFinite(r))throw new TypeError(o("is not a finite floating-point value",t));return r},r["unrestricted double"]=function(e){return+e},r.float=function(e,t){var r=+e;if(!Number.isFinite(r))throw new TypeError(o("is not a finite floating-point value",t));if(Object.is(r,-0))return r;var n=Math.fround(r);if(!Number.isFinite(n))throw new TypeError(o("is outside the range of a single-precision floating-point value",t));return n},r["unrestricted float"]=function(e){var t=+e;return isNaN(t)||Object.is(t,-0)?t:Math.fround(t)},r.DOMString=function(e,t){if(void 0===t&&(t={}),t.treatNullAsEmptyString&&null===e)return"";if("symbol"===(void 0===e?"undefined":n(e)))throw new TypeError(o("is a symbol, which cannot be converted to a string",t));return String(e)},r.ByteString=function(e,t){var n=r.DOMString(e,t);var i=void 0;for(var u=0;void 0!==(i=n.codePointAt(u));++u)if(i>255)throw new TypeError(o("is not a valid ByteString",t));return n},r.USVString=function(e,t){var n=r.DOMString(e,t);var o=n.length;var i=[];for(var u=0;u<o;++u){var a=n.charCodeAt(u);if(a<55296||a>57343)i.push(String.fromCodePoint(a));else if(56320<=a&&a<=57343)i.push(String.fromCodePoint(65533));else if(u===o-1)i.push(String.fromCodePoint(65533));else{var s=n.charCodeAt(u+1);if(56320<=s&&s<=57343){var c=1023&a;var l=1023&s;i.push(String.fromCodePoint(65536+1024*c+l)),++u}else i.push(String.fromCodePoint(65533))}}return i.join("")},r.object=function(e,t){if("Object"!==function(e){if(null===e)return"Null";switch(void 0===e?"undefined":n(e)){case"undefined":return"Undefined";case"boolean":return"Boolean";case"number":return"Number";case"string":return"String";case"symbol":return"Symbol";case"object":case"function":default:return"Object"}}(e))throw new TypeError(o("is not an object",t));return e},[Error,ArrayBuffer,DataView,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach((function(e){var t=e.name;var n=/^[AEIOU]/.test(t)?"an":"a";r[t]=function(r,i){if(!(r instanceof e))throw new TypeError(o("is not "+n+" "+t+" object",i));return r}})),r.ArrayBufferView=function(e,t){if(!ArrayBuffer.isView(e))throw new TypeError(o("is not a view on an ArrayBuffer object",t));return e},r.BufferSource=function(e,t){if(!(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))throw new TypeError(o("is not an ArrayBuffer object or a view on one",t));return e},r.DOMTimeStamp=r["unsigned long long"],r.Function=c,r.VoidFunction=c},{}]},{},[1])(1)}));var V=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){try{return K(e)}catch(e){throw new N.DataCloneError}}}));var L=T((function(e,t){var r=F&&F.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e.source instanceof te.default?e.source:e.source.objectStore};var o=function(e,t,n){var o,i,u,a;var s=void 0!==e?e.lower:void 0;var c=void 0!==e?e.upper:void 0;try{for(var l=r(t),f=l.next();!f.done;f=l.next()){var d=f.value;void 0!==d&&(void 0!==s&&1!==k.default(s,d)||(s=d))}}catch(e){o={error:e}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}try{for(var h=r(n),p=h.next();!p.done;p=h.next()){var v=p.value;void 0!==v&&(void 0!==c&&-1!==k.default(c,v)||(c=v))}}catch(e){u={error:e}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(u)throw u.error}}return void 0!==s&&void 0!==c?M.default.bound(s,c):void 0!==s?M.default.lowerBound(s):void 0!==c?M.default.upperBound(c):void 0};var i=function(){function e(e,t,r,n,o){void 0===r&&(r="next"),void 0===o&&(o=!1),this._gotValue=!1,this._position=void 0,this._objectStorePosition=void 0,this._keyOnly=!1,this._key=void 0,this._primaryKey=void 0,this._range=t,this._source=e,this._direction=r,this._request=n,this._keyOnly=o}return Object.defineProperty(e.prototype,"source",{get:function(){return this._source},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"primaryKey",{get:function(){return this._primaryKey},set:function(e){},enumerable:!0,configurable:!0}),e.prototype._iterate=function(e,t){var n,i,u,a,s,c,l,f;var d=this.source instanceof te.default;var h=this.source instanceof te.default?this.source._rawObjectStore.records:this.source._rawIndex.records;var p;if("next"===this.direction){var v=o(this._range,[e,this._position],[]);try{for(var y=r(h.values(v)),b=y.next();!b.done;b=y.next()){var w=b.value;var _=void 0!==e?k.default(w.key,e):void 0;var g=void 0!==this._position?k.default(w.key,this._position):void 0;if(void 0===e||-1!==_){if(void 0!==t){if(-1===_)continue;var m=k.default(w.value,t);if(0===_&&-1===m)continue}if(void 0===this._position||!d||1===g){if(void 0!==this._position&&!d){if(-1===g)continue;if(0===g&&1!==k.default(w.value,this._objectStorePosition))continue}if(void 0===this._range||this._range.includes(w.key)){p=w;break}}}}}catch(e){n={error:e}}finally{try{b&&!b.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}}else if("nextunique"===this.direction){v=o(this._range,[e,this._position],[]);try{for(var A=r(h.values(v)),E=A.next();!E.done;E=A.next())if(w=E.value,(void 0===e||-1!==k.default(w.key,e))&&(void 0===this._position||1===k.default(w.key,this._position))&&(void 0===this._range||this._range.includes(w.key))){p=w;break}}catch(e){u={error:e}}finally{try{E&&!E.done&&(a=A.return)&&a.call(A)}finally{if(u)throw u.error}}}else if("prev"===this.direction){v=o(this._range,[],[e,this._position]);try{for(var O=r(h.values(v,"prev")),S=O.next();!S.done;S=O.next())if(w=S.value,_=void 0!==e?k.default(w.key,e):void 0,g=void 0!==this._position?k.default(w.key,this._position):void 0,void 0===e||1!==_){if(void 0!==t){if(1===_)continue;if(m=k.default(w.value,t),0===_&&1===m)continue}if(void 0===this._position||!d||-1===g){if(void 0!==this._position&&!d){if(1===g)continue;if(0===g&&-1!==k.default(w.value,this._objectStorePosition))continue}if(void 0===this._range||this._range.includes(w.key)){p=w;break}}}}catch(e){s={error:e}}finally{try{S&&!S.done&&(c=O.return)&&c.call(O)}finally{if(s)throw s.error}}}else if("prevunique"===this.direction){var j=void 0;v=o(this._range,[],[e,this._position]);try{for(var D=r(h.values(v,"prev")),x=D.next();!x.done;x=D.next())if(w=x.value,(void 0===e||1!==k.default(w.key,e))&&(void 0===this._position||-1===k.default(w.key,this._position))&&(void 0===this._range||this._range.includes(w.key))){j=w;break}}catch(e){l={error:e}}finally{try{x&&!x.done&&(f=D.return)&&f.call(D)}finally{if(l)throw l.error}}j&&(p=h.get(j.key))}var B;if(p){if(this._position=p.key,d||(this._objectStorePosition=p.value),this._key=p.key,d)this._primaryKey=V.default(p.key),this._keyOnly||"FDBCursorWithValue"!==this.constructor.name||(this.value=V.default(p.value));else if(this._primaryKey=V.default(p.value),!this._keyOnly&&"FDBCursorWithValue"===this.constructor.name){if(this.source instanceof te.default)throw new Error("This should never happen");var C=this.source.objectStore._rawObjectStore.getValue(p.value);this.value=V.default(C)}this._gotValue=!0,B=this}else this._key=void 0,d||(this._objectStorePosition=void 0),this._keyOnly||"FDBCursorWithValue"!==this.constructor.name||(this.value=void 0),B=null;return B},e.prototype.update=function(e){if(void 0===e)throw new TypeError;var t=n(this);var r=this.source.hasOwnProperty("_rawIndex")?this.primaryKey:this._position;var o=t.transaction;if("active"!==o._state)throw new N.TransactionInactiveError;if("readonly"===o.mode)throw new N.ReadOnlyError;if(t._rawObjectStore.deleted)throw new N.InvalidStateError;if(!(this.source instanceof te.default)&&this.source._rawIndex.deleted)throw new N.InvalidStateError;if(!this._gotValue||!this.hasOwnProperty("value"))throw new N.InvalidStateError;var i=V.default(e);if(null!==t.keyPath){var u=void 0;try{u=U.default(t.keyPath,i)}catch(e){}if(0!==k.default(u,r))throw new N.DataError}var a={key:r,value:i};return o._execRequestAsync({operation:t._rawObjectStore.storeRecord.bind(t._rawObjectStore,a,!1,o._rollbackLog),source:this})},e.prototype.advance=function(e){var t=this;if(!Number.isInteger(e)||e<=0)throw new TypeError;var r=n(this);var o=r.transaction;if("active"!==o._state)throw new N.TransactionInactiveError;if(r._rawObjectStore.deleted)throw new N.InvalidStateError;if(!(this.source instanceof te.default)&&this.source._rawIndex.deleted)throw new N.InvalidStateError;if(!this._gotValue)throw new N.InvalidStateError;this._request&&(this._request.readyState="pending"),o._execRequestAsync({operation:function(){var r;for(var n=0;n<e&&(r=t._iterate());n++);return r},request:this._request,source:this.source}),this._gotValue=!1},e.prototype.continue=function(e){var t=n(this);var r=t.transaction;if("active"!==r._state)throw new N.TransactionInactiveError;if(t._rawObjectStore.deleted)throw new N.InvalidStateError;if(!(this.source instanceof te.default)&&this.source._rawIndex.deleted)throw new N.InvalidStateError;if(!this._gotValue)throw new N.InvalidStateError;if(void 0!==e){e=R.default(e);var o=k.default(e,this._position);if(o<=0&&("next"===this.direction||"nextunique"===this.direction)||o>=0&&("prev"===this.direction||"prevunique"===this.direction))throw new N.DataError}this._request&&(this._request.readyState="pending"),r._execRequestAsync({operation:this._iterate.bind(this,e),request:this._request,source:this.source}),this._gotValue=!1},e.prototype.continuePrimaryKey=function(e,t){var r=n(this);var o=r.transaction;if("active"!==o._state)throw new N.TransactionInactiveError;if(r._rawObjectStore.deleted)throw new N.InvalidStateError;if(!(this.source instanceof te.default)&&this.source._rawIndex.deleted)throw new N.InvalidStateError;if(this.source instanceof te.default||"next"!==this.direction&&"prev"!==this.direction)throw new N.InvalidAccessError;if(!this._gotValue)throw new N.InvalidStateError;if(void 0===e||void 0===t)throw new N.DataError;e=R.default(e);var i=k.default(e,this._position);if(-1===i&&"next"===this.direction||1===i&&"prev"===this.direction)throw new N.DataError;var u=k.default(t,this._objectStorePosition);if(0===i&&(u<=0&&"next"===this.direction||u>=0&&"prev"===this.direction))throw new N.DataError;this._request&&(this._request.readyState="pending"),o._execRequestAsync({operation:this._iterate.bind(this,e,t),request:this._request,source:this.source}),this._gotValue=!1},e.prototype.delete=function(){var e=n(this);var t=this.source.hasOwnProperty("_rawIndex")?this.primaryKey:this._position;var r=e.transaction;if("active"!==r._state)throw new N.TransactionInactiveError;if("readonly"===r.mode)throw new N.ReadOnlyError;if(e._rawObjectStore.deleted)throw new N.InvalidStateError;if(!(this.source instanceof te.default)&&this.source._rawIndex.deleted)throw new N.InvalidStateError;if(!this._gotValue||!this.hasOwnProperty("value"))throw new N.InvalidStateError;return r._execRequestAsync({operation:e._rawObjectStore.deleteRecord.bind(e._rawObjectStore,t,r._rollbackLog),source:this})},e.prototype.toString=function(){return"[object IDBCursor]"},e}();t.default=i}));var q=T((function(e,t){var r=F&&F.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});var n;Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,r,n,o){var i=e.call(this,t,r,n,o)||this;return i.value=void 0,i}return r(t,e),t.prototype.toString=function(){return"[object IDBCursorWithValue]"},t}(L.default);t.default=o}));var $=T((function(e,t){var r=F&&F.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){return e.immediatePropagationStopped||e.eventPhase===e.CAPTURING_PHASE&&!1===t.capture||e.eventPhase===e.BUBBLING_PHASE&&!0===t.capture};var o=function(e,t){var o,i;e.currentTarget=t;try{for(var u=r(t.listeners.slice()),a=u.next();!a.done;a=u.next()){var s=a.value;e.type!==s.type||n(e,s)||s.callback.call(e.currentTarget,e)}}catch(e){o={error:e}}finally{try{a&&!a.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}var c={abort:"onabort",blocked:"onblocked",complete:"oncomplete",error:"onerror",success:"onsuccess",upgradeneeded:"onupgradeneeded",versionchange:"onversionchange"}[e.type];if(void 0===c)throw new Error('Unknown event type: "'+e.type+'"');var l=e.currentTarget[c];l&&(s={callback:l,capture:!1,type:e.type},n(e,s)||s.callback.call(e.currentTarget,e))};var i=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e,t,r){void 0===r&&(r=!1),this.listeners.push({callback:t,capture:r,type:e})},e.prototype.removeEventListener=function(e,t,r){void 0===r&&(r=!1);var n=this.listeners.findIndex((function(n){return n.type===e&&n.callback===t&&n.capture===r}));this.listeners.splice(n,1)},e.prototype.dispatchEvent=function(e){var t,n,i,u;if(e.dispatched||!e.initialized)throw new N.InvalidStateError("The object is in an invalid state.");e.isTrusted=!1,e.dispatched=!0,e.target=this,e.eventPhase=e.CAPTURING_PHASE;try{for(var a=r(e.eventPath),s=a.next();!s.done;s=a.next()){var c=s.value;e.propagationStopped||o(e,c)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}if(e.eventPhase=e.AT_TARGET,e.propagationStopped||o(e,e.target),e.bubbles){e.eventPath.reverse(),e.eventPhase=e.BUBBLING_PHASE;try{for(var l=r(e.eventPath),f=l.next();!f.done;f=l.next())c=f.value,e.propagationStopped||o(e,c)}catch(e){i={error:e}}finally{try{f&&!f.done&&(u=l.return)&&u.call(l)}finally{if(i)throw i.error}}}return e.dispatched=!1,e.eventPhase=e.NONE,e.currentTarget=null,!e.canceled},e}();t.default=i}));var H=T((function(e,t){var r=F&&F.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});var n;Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._result=null,t._error=null,t.source=null,t.transaction=null,t.readyState="pending",t.onsuccess=null,t.onerror=null,t}return r(t,e),Object.defineProperty(t.prototype,"error",{get:function(){if("pending"===this.readyState)throw new N.InvalidStateError;return this._error},set:function(e){this._error=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"result",{get:function(){if("pending"===this.readyState)throw new N.InvalidStateError;return this._result},set:function(e){this._result=e},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"[object IDBRequest]"},t}($.default);t.default=o}));var W=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r="unsigned long"===t?4294967295:9007199254740991;if(isNaN(e)||e<0||e>r)throw new TypeError;if(e>=0)return Math.floor(e)}}));var G=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.slice();return Object.defineProperty(t,"contains",{value:function(e){return t.indexOf(e)>=0}}),Object.defineProperty(t,"item",{value:function(e){return t[e]}}),t}}));var J=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===t&&(t=!1),e instanceof M.default)return e;if(null==e){if(t)throw new N.DataError;return new M.default(void 0,void 0,!1,!1)}var r=R.default(e);return M.default.only(r)}}));var z=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e._rawIndex.deleted||e.objectStore._rawObjectStore.deleted)throw new N.InvalidStateError;if("active"!==e.objectStore.transaction._state)throw new N.TransactionInactiveError};var n=function(){function e(e,t){this._rawIndex=t,this._name=t.name,this.objectStore=e,this.keyPath=t.keyPath,this.multiEntry=t.multiEntry,this.unique=t.unique}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){var t=this;var r=this.objectStore.transaction;if(!r.db._runningVersionchangeTransaction)throw new N.InvalidStateError;if("active"!==r._state)throw new N.TransactionInactiveError;if(this._rawIndex.deleted||this.objectStore._rawObjectStore.deleted)throw new N.InvalidStateError;if((e=String(e))!==this._name){if(this.objectStore.indexNames.indexOf(e)>=0)throw new N.ConstraintError;var n=this._name;var o=this.objectStore.indexNames.slice();this._name=e,this._rawIndex.name=e,this.objectStore._indexesCache.delete(n),this.objectStore._indexesCache.set(e,this),this.objectStore._rawObjectStore.rawIndexes.delete(n),this.objectStore._rawObjectStore.rawIndexes.set(e,this._rawIndex),this.objectStore.indexNames=G.default(Array.from(this.objectStore._rawObjectStore.rawIndexes.keys()).filter((function(e){var r=t.objectStore._rawObjectStore.rawIndexes.get(e);return r&&!r.deleted}))).sort(),r._rollbackLog.push((function(){t._name=n,t._rawIndex.name=n,t.objectStore._indexesCache.delete(e),t.objectStore._indexesCache.set(n,t),t.objectStore._rawObjectStore.rawIndexes.delete(e),t.objectStore._rawObjectStore.rawIndexes.set(n,t._rawIndex),t.objectStore.indexNames=G.default(o)}))}},enumerable:!0,configurable:!0}),e.prototype.openCursor=function(e,t){r(this),null===e&&(e=void 0),void 0===e||e instanceof M.default||(e=M.default.only(R.default(e)));var n=new H.default;n.source=this,n.transaction=this.objectStore.transaction;var o=new q.default(this,e,t,n);return this.objectStore.transaction._execRequestAsync({operation:o._iterate.bind(o),request:n,source:this})},e.prototype.openKeyCursor=function(e,t){r(this),null===e&&(e=void 0),void 0===e||e instanceof M.default||(e=M.default.only(R.default(e)));var n=new H.default;n.source=this,n.transaction=this.objectStore.transaction;var o=new L.default(this,e,t,n,!0);return this.objectStore.transaction._execRequestAsync({operation:o._iterate.bind(o),request:n,source:this})},e.prototype.get=function(e){return r(this),e instanceof M.default||(e=R.default(e)),this.objectStore.transaction._execRequestAsync({operation:this._rawIndex.getValue.bind(this._rawIndex,e),source:this})},e.prototype.getAll=function(e,t){arguments.length>1&&void 0!==t&&(t=W.default(t,"unsigned long")),r(this);var n=J.default(e);return this.objectStore.transaction._execRequestAsync({operation:this._rawIndex.getAllValues.bind(this._rawIndex,n,t),source:this})},e.prototype.getKey=function(e){return r(this),e instanceof M.default||(e=R.default(e)),this.objectStore.transaction._execRequestAsync({operation:this._rawIndex.getKey.bind(this._rawIndex,e),source:this})},e.prototype.getAllKeys=function(e,t){arguments.length>1&&void 0!==t&&(t=W.default(t,"unsigned long")),r(this);var n=J.default(e);return this.objectStore.transaction._execRequestAsync({operation:this._rawIndex.getAllKeys.bind(this._rawIndex,n,t),source:this})},e.prototype.count=function(e){var t=this;return r(this),null===e&&(e=void 0),void 0===e||e instanceof M.default||(e=M.default.only(R.default(e))),this.objectStore.transaction._execRequestAsync({operation:function(){var r=0;var n=new L.default(t,e);for(;null!==n._iterate();)r+=1;return r},source:this})},e.prototype.toString=function(){return"[object IDBIndex]"},e}();t.default=n}));var Y=T((function(e,t){var r=F&&F.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,o;if(Array.isArray(e))throw new Error("The key paths used in this section are always strings and never sequences, since it is not possible to create a object store which has a key generator and also has a key path that is a sequence.");var i=e.split(".");if(0===i.length)throw new Error("Assert: identifiers is not empty");i.pop();try{for(var u=r(i),a=u.next();!a.done;a=u.next()){var s=a.value;if("object"!=typeof t&&!Array.isArray(t))return!1;if(!t.hasOwnProperty(s))return!0;t=t[s]}}catch(e){n={error:e}}finally{try{a&&!a.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return"object"==typeof t||Array.isArray(t)}}));var Z=T((function(e,t){function r(e,t){var r=0;var n=e.length;var o;for(;r<n;)o=r+n>>>1,k.default(e[o].key,t)<0?r=o+1:n=o;return r}function n(e,t){var n=r(e,t);var o=e[n];return o&&0===k.default(o.key,t)?n:-1}function o(e,t){var n=void 0===t.lower?0:r(e,t.lower);var o=void 0===t.upper?e.length-1:r(e,t.upper);for(var i=n;i<=o;i++){var u=e[i];if(u&&t.includes(u.key))return i}return-1}Object.defineProperty(t,"__esModule",{value:!0}),t.getIndexByKey=n,t.getByKey=function(e,t){return e[n(e,t)]},t.getIndexByKeyRange=o,t.getByKeyRange=function(e,t){return e[o(e,t)]},t.getIndexByKeyGTE=function(e,t){var n=r(e,t);var o=e[n];return o&&k.default(o.key,t)>=0?n:-1}}));var X=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.records=[]}return e.prototype.get=function(e){return e instanceof M.default?Z.getByKeyRange(this.records,e):Z.getByKey(this.records,e)},e.prototype.add=function(e){var t;if(0===this.records.length)t=0;else if(-1===(t=Z.getIndexByKeyGTE(this.records,e.key)))t=this.records.length;else for(;t<this.records.length&&0===k.default(this.records[t].key,e.key)&&-1===k.default(this.records[t].value,e.value);)t+=1;this.records.splice(t,0,e)},e.prototype.delete=function(e){var t=[];var r=e instanceof M.default;for(;;){var n=r?Z.getIndexByKeyRange(this.records,e):Z.getIndexByKey(this.records,e);if(-1===n)break;t.push(this.records[n]),this.records.splice(n,1)}return t},e.prototype.deleteByValue=function(e){var t=e instanceof M.default?e:M.default.only(e);var r=[];return this.records=this.records.filter((function(e){var n=t.includes(e.value);return n&&r.push(e),!n})),r},e.prototype.clear=function(){var e=this.records.slice();return this.records=[],e},e.prototype.values=function(e,t){var r;var n=this;return void 0===t&&(t="next"),(r={})[Symbol.iterator]=function(){var r;if("next"===t){if(r=0,void 0!==e&&void 0!==e.lower)for(;void 0!==n.records[r]&&1!==(o=k.default(n.records[r].key,e.lower))&&(0!==o||e.lowerOpen);)r+=1}else if(r=n.records.length-1,void 0!==e&&void 0!==e.upper)for(;void 0!==n.records[r];){var o;if(-1===(o=k.default(n.records[r].key,e.upper))||0===o&&!e.upperOpen)break;r-=1}return{next:function(){var o;var i;var u;return"next"===t?(i=n.records[r],o=r>=n.records.length,r+=1,o||void 0===e||void 0===e.upper||(o=1===(u=k.default(i.key,e.upper))||0===u&&e.upperOpen)&&(i=void 0)):(i=n.records[r],o=r<0,r-=1,o||void 0===e||void 0===e.lower||(o=-1===(u=k.default(i.key,e.lower))||0===u&&e.lowerOpen)&&(i=void 0)),{done:o,value:i}}}},r},e}();t.default=r}));var Q=T((function(e,t){var r=F&&F.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r,n,o){this.deleted=!1,this.initialized=!1,this.records=new X.default,this.rawObjectStore=e,this.name=t,this.keyPath=r,this.multiEntry=n,this.unique=o}return e.prototype.getKey=function(e){var t=this.records.get(e);return void 0!==t?t.value:void 0},e.prototype.getAllKeys=function(e,t){var n,o;void 0!==t&&0!==t||(t=1/0);var i=[];try{for(var u=r(this.records.values(e)),a=u.next();!a.done;a=u.next()){var s=a.value;if(i.push(V.default(s.value)),i.length>=t)break}}catch(e){n={error:e}}finally{try{a&&!a.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return i},e.prototype.getValue=function(e){var t=this.records.get(e);return void 0!==t?this.rawObjectStore.getValue(t.value):void 0},e.prototype.getAllValues=function(e,t){var n,o;void 0!==t&&0!==t||(t=1/0);var i=[];try{for(var u=r(this.records.values(e)),a=u.next();!a.done;a=u.next()){var s=a.value;if(i.push(this.rawObjectStore.getValue(s.value)),i.length>=t)break}}catch(e){n={error:e}}finally{try{a&&!a.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return i},e.prototype.storeRecord=function(e){var t,n,o,i,u,a;var s;try{s=U.default(this.keyPath,e.value)}catch(e){if("DataError"===e.name)return;throw e}if(this.multiEntry&&Array.isArray(s)){var c=[];try{for(var l=r(s),f=l.next();!f.done;f=l.next()){var d=f.value;if(c.indexOf(d)<0)try{c.push(R.default(d))}catch(e){}}}catch(e){t={error:e}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}s=c}else try{R.default(s)}catch(e){return}if(this.multiEntry&&Array.isArray(s)){if(this.unique)try{for(var h=r(s),p=h.next();!p.done;p=h.next()){var v=p.value;if(this.records.get(v))throw new N.ConstraintError}}catch(e){o={error:e}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}}else if(this.unique&&this.records.get(s))throw new N.ConstraintError;if(this.multiEntry&&Array.isArray(s))try{for(var y=r(s),b=y.next();!b.done;b=y.next())v=b.value,this.records.add({key:v,value:e.key})}catch(e){u={error:e}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(u)throw u.error}}else this.records.add({key:s,value:e.key})},e.prototype.initialize=function(e){var t=this;if(this.initialized)throw new Error("Index already initialized");e._execRequestAsync({operation:function(){var n,o;try{try{for(var i=r(t.rawObjectStore.records.values()),u=i.next();!u.done;u=i.next()){var a=u.value;t.storeRecord(a)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}t.initialized=!0}catch(t){e._abort(t.name)}},source:null})},e}();t.default=n}));var ee=T((function(e,t){var r=F&&F.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){var o,i,u,a;if(null==e||"string"==typeof e||!e.toString||"array"!==t&&Array.isArray(e)||(e=e.toString()),"string"==typeof e){if(""===e&&"string"!==t)return;try{if(e.length>=1&&/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC])(?:[\$0-9A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC])*$/.test(e))return}catch(e){throw new SyntaxError(e.message)}if(e.indexOf(" ")>=0)throw new SyntaxError("The keypath argument contains an invalid key path (no spaces allowed).")}if(Array.isArray(e)&&e.length>0){if(t)throw new SyntaxError("The keypath argument contains an invalid key path (nested arrays).");try{for(var s=r(e),c=s.next();!c.done;c=s.next()){var l=c.value;n(l,"array")}}catch(e){o={error:e}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}}else{if(!("string"==typeof e&&e.indexOf(".")>=0))throw new SyntaxError;e=e.split(".");try{for(var f=r(e),d=f.next();!d.done;d=f.next())l=d.value,n(l,"string")}catch(e){u={error:e}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(u)throw u.error}}}};t.default=n}));var te=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e._rawObjectStore.deleted)throw new N.InvalidStateError;if("active"!==e.transaction._state)throw new N.TransactionInactiveError};var n=function(e,t,n){if(r(e),"readonly"===e.transaction.mode)throw new N.ReadOnlyError;if(null!==e.keyPath&&void 0!==n)throw new N.DataError;var o=V.default(t);if(null!==e.keyPath){var i=U.default(e.keyPath,o);if(void 0!==i)R.default(i);else{if(!e._rawObjectStore.keyGenerator)throw new N.DataError;if(!Y.default(e.keyPath,o))throw new N.DataError}}if(null===e.keyPath&&null===e._rawObjectStore.keyGenerator&&void 0===n)throw new N.DataError;return void 0!==n&&(n=R.default(n)),{key:n,value:o}};var o=function(){function e(e,t){this._indexesCache=new Map,this._rawObjectStore=t,this._name=t.name,this.keyPath=t.keyPath,this.autoIncrement=t.autoIncrement,this.transaction=e,this.indexNames=G.default(Array.from(t.rawIndexes.keys())).sort()}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){var t=this;var n=this.transaction;if(!n.db._runningVersionchangeTransaction)throw new N.InvalidStateError;if(r(this),(e=String(e))!==this._name){if(this._rawObjectStore.rawDatabase.rawObjectStores.has(e))throw new N.ConstraintError;var o=this._name;var i=n.db.objectStoreNames.slice();this._name=e,this._rawObjectStore.name=e,this.transaction._objectStoresCache.delete(o),this.transaction._objectStoresCache.set(e,this),this._rawObjectStore.rawDatabase.rawObjectStores.delete(o),this._rawObjectStore.rawDatabase.rawObjectStores.set(e,this._rawObjectStore),n.db.objectStoreNames=G.default(Array.from(this._rawObjectStore.rawDatabase.rawObjectStores.keys()).filter((function(e){var r=t._rawObjectStore.rawDatabase.rawObjectStores.get(e);return r&&!r.deleted}))).sort();var u=new Set(n._scope);var a=n.objectStoreNames.slice();this.transaction._scope.delete(o),n._scope.add(e),n.objectStoreNames=G.default(Array.from(n._scope).sort()),n._rollbackLog.push((function(){t._name=o,t._rawObjectStore.name=o,t.transaction._objectStoresCache.delete(e),t.transaction._objectStoresCache.set(o,t),t._rawObjectStore.rawDatabase.rawObjectStores.delete(e),t._rawObjectStore.rawDatabase.rawObjectStores.set(o,t._rawObjectStore),n.db.objectStoreNames=G.default(i),n._scope=u,n.objectStoreNames=G.default(a)}))}},enumerable:!0,configurable:!0}),e.prototype.put=function(e,t){if(0===arguments.length)throw new TypeError;var r=n(this,e,t);return this.transaction._execRequestAsync({operation:this._rawObjectStore.storeRecord.bind(this._rawObjectStore,r,!1,this.transaction._rollbackLog),source:this})},e.prototype.add=function(e,t){if(0===arguments.length)throw new TypeError;var r=n(this,e,t);return this.transaction._execRequestAsync({operation:this._rawObjectStore.storeRecord.bind(this._rawObjectStore,r,!0,this.transaction._rollbackLog),source:this})},e.prototype.delete=function(e){if(0===arguments.length)throw new TypeError;if(r(this),"readonly"===this.transaction.mode)throw new N.ReadOnlyError;return e instanceof M.default||(e=R.default(e)),this.transaction._execRequestAsync({operation:this._rawObjectStore.deleteRecord.bind(this._rawObjectStore,e,this.transaction._rollbackLog),source:this})},e.prototype.get=function(e){if(0===arguments.length)throw new TypeError;return r(this),e instanceof M.default||(e=R.default(e)),this.transaction._execRequestAsync({operation:this._rawObjectStore.getValue.bind(this._rawObjectStore,e),source:this})},e.prototype.getAll=function(e,t){arguments.length>1&&void 0!==t&&(t=W.default(t,"unsigned long")),r(this);var n=J.default(e);return this.transaction._execRequestAsync({operation:this._rawObjectStore.getAllValues.bind(this._rawObjectStore,n,t),source:this})},e.prototype.getKey=function(e){if(0===arguments.length)throw new TypeError;return r(this),e instanceof M.default||(e=R.default(e)),this.transaction._execRequestAsync({operation:this._rawObjectStore.getKey.bind(this._rawObjectStore,e),source:this})},e.prototype.getAllKeys=function(e,t){arguments.length>1&&void 0!==t&&(t=W.default(t,"unsigned long")),r(this);var n=J.default(e);return this.transaction._execRequestAsync({operation:this._rawObjectStore.getAllKeys.bind(this._rawObjectStore,n,t),source:this})},e.prototype.clear=function(){if(r(this),"readonly"===this.transaction.mode)throw new N.ReadOnlyError;return this.transaction._execRequestAsync({operation:this._rawObjectStore.clear.bind(this._rawObjectStore,this.transaction._rollbackLog),source:this})},e.prototype.openCursor=function(e,t){r(this),null===e&&(e=void 0),void 0===e||e instanceof M.default||(e=M.default.only(R.default(e)));var n=new H.default;n.source=this,n.transaction=this.transaction;var o=new q.default(this,e,t,n);return this.transaction._execRequestAsync({operation:o._iterate.bind(o),request:n,source:this})},e.prototype.openKeyCursor=function(e,t){r(this),null===e&&(e=void 0),void 0===e||e instanceof M.default||(e=M.default.only(R.default(e)));var n=new H.default;n.source=this,n.transaction=this.transaction;var o=new L.default(this,e,t,n,!0);return this.transaction._execRequestAsync({operation:o._iterate.bind(o),request:n,source:this})},e.prototype.createIndex=function(e,t,n){var o=this;if(void 0===n&&(n={}),arguments.length<2)throw new TypeError;var i=void 0!==n.multiEntry&&n.multiEntry;var u=void 0!==n.unique&&n.unique;if("versionchange"!==this.transaction.mode)throw new N.InvalidStateError;if(r(this),this.indexNames.indexOf(e)>=0)throw new N.ConstraintError;if(ee.default(t),Array.isArray(t)&&i)throw new N.InvalidAccessError;var a=this.indexNames.slice();this.transaction._rollbackLog.push((function(){var t=o._rawObjectStore.rawIndexes.get(e);t&&(t.deleted=!0),o.indexNames=G.default(a),o._rawObjectStore.rawIndexes.delete(e)}));var s=new Q.default(this._rawObjectStore,e,t,i,u);return this.indexNames.push(e),this.indexNames.sort(),this._rawObjectStore.rawIndexes.set(e,s),s.initialize(this.transaction),new z.default(this,s)},e.prototype.index=function(e){if(0===arguments.length)throw new TypeError;if(this._rawObjectStore.deleted||"finished"===this.transaction._state)throw new N.InvalidStateError;var t=this._indexesCache.get(e);if(void 0!==t)return t;var r=this._rawObjectStore.rawIndexes.get(e);if(this.indexNames.indexOf(e)<0||void 0===r)throw new N.NotFoundError;var n=new z.default(this,r);return this._indexesCache.set(e,n),n},e.prototype.deleteIndex=function(e){var t=this;if(0===arguments.length)throw new TypeError;if("versionchange"!==this.transaction.mode)throw new N.InvalidStateError;r(this);var n=this._rawObjectStore.rawIndexes.get(e);if(void 0===n)throw new N.NotFoundError;this.transaction._rollbackLog.push((function(){n.deleted=!1,t._rawObjectStore.rawIndexes.set(e,n),t.indexNames.push(e),t.indexNames.sort()})),this.indexNames=G.default(this.indexNames.filter((function(t){return t!==e}))),n.deleted=!0,this.transaction._execRequestAsync({operation:function(){var r=t._rawObjectStore.rawIndexes.get(e);n===r&&t._rawObjectStore.rawIndexes.delete(e)},source:this})},e.prototype.count=function(e){var t=this;return r(this),null===e&&(e=void 0),void 0===e||e instanceof M.default||(e=M.default.only(R.default(e))),this.transaction._execRequestAsync({operation:function(){var r=0;var n=new L.default(t,e);for(;null!==n._iterate();)r+=1;return r},source:this})},e.prototype.toString=function(){return"[object IDBObjectStore]"},e}();t.default=o}));var re=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t={}),this.eventPath=[],this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.canceled=!1,this.initialized=!0,this.dispatched=!1,this.target=null,this.currentTarget=null,this.eventPhase=0,this.defaultPrevented=!1,this.isTrusted=!1,this.timeStamp=Date.now(),this.type=e,this.bubbles=void 0!==t.bubbles&&t.bubbles,this.cancelable=void 0!==t.cancelable&&t.cancelable}return e.prototype.preventDefault=function(){this.cancelable&&(this.canceled=!0)},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.stopImmediatePropagation=function(){this.propagationStopped=!0,this.immediatePropagationStopped=!0},e}();t.default=r}));var ne=T((function(e,t){var r=F&&F.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});var n;var o=F&&F.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,r,n){var o=e.call(this)||this;return o._state="active",o._started=!1,o._rollbackLog=[],o._objectStoresCache=new Map,o.error=null,o.onabort=null,o.oncomplete=null,o.onerror=null,o._requests=[],o._scope=new Set(t),o.mode=r,o.db=n,o.objectStoreNames=G.default(Array.from(o._scope).sort()),o}return r(t,e),t.prototype._abort=function(e){var t,r,n,i;var u=this;try{for(var a=o(this._rollbackLog.reverse()),s=a.next();!s.done;s=a.next())(0,s.value)()}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}if(null!==e){var c=new Error;c.name=e,this.error=c}try{for(var l=o(this._requests),f=l.next();!f.done;f=l.next()){var d=f.value.request;if("done"!==d.readyState&&(d.readyState="done",d.source)){d.result=void 0,d.error=new N.AbortError;var h=new re.default("error",{bubbles:!0,cancelable:!0});h.eventPath=[this.db,this],d.dispatchEvent(h)}}}catch(e){n={error:e}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}setImmediate((function(){var e=new re.default("abort",{bubbles:!0,cancelable:!1});e.eventPath=[u.db],u.dispatchEvent(e)})),this._state="finished"},t.prototype.abort=function(){if("committing"===this._state||"finished"===this._state)throw new N.InvalidStateError;this._state="active",this._abort(null)},t.prototype.objectStore=function(e){if("active"!==this._state)throw new N.InvalidStateError;var t=this._objectStoresCache.get(e);if(void 0!==t)return t;var r=this.db._rawDatabase.rawObjectStores.get(e);if(!this._scope.has(e)||void 0===r)throw new N.NotFoundError;var n=new te.default(this,r);return this._objectStoresCache.set(e,n),n},t.prototype._execRequestAsync=function(e){var t=e.source;var r=e.operation;var n=e.hasOwnProperty("request")?e.request:null;if("active"!==this._state)throw new N.TransactionInactiveError;return n||(t?((n=new H.default).source=t,n.transaction=t.transaction):n=new H.default),this._requests.push({operation:r,request:n}),n},t.prototype._start=function(){var e;var t;for(this._started=!0;this._requests.length>0;){var r=this._requests.shift();if(r&&"done"!==r.request.readyState){t=r.request,e=r.operation;break}}if(t&&e){if(t.source){var n=void 0;var o;try{var i=e();t.readyState="done",t.result=i,t.error=void 0,"inactive"===this._state&&(this._state="active"),o=new re.default("success",{bubbles:!1,cancelable:!1})}catch(e){t.readyState="done",t.result=void 0,t.error=e,"inactive"===this._state&&(this._state="active"),o=new re.default("error",{bubbles:!0,cancelable:!0}),n=this._abort.bind(this,e.name)}try{o.eventPath=[this.db,this],t.dispatchEvent(o)}catch(e){throw"committing"!==this._state&&this._abort("AbortError"),e}o.canceled||n&&n()}else e();setImmediate(this._start.bind(this))}else if("finished"!==this._state&&(this._state="finished",!this.error)){var u=new re.default("complete");this.dispatchEvent(u)}},t.prototype.commit=function(){if("active"!==this._state)throw new N.InvalidStateError;this._state="committing"},t.prototype.toString=function(){return"[object IDBRequest]"},t}($.default);t.default=i}));var oe=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=9007199254740992;var n=function(){function e(){this.num=0}return e.prototype.next=function(){if(this.num>=r)throw new N.ConstraintError;return this.num+=1,this.num},e.prototype.setIfLarger=function(e){var t=Math.floor(Math.min(e,r))-1;t>=this.num&&(this.num=t+1)},e}();t.default=n}));var ie=T((function(e,t){var r=F&&F.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r,n){this.deleted=!1,this.records=new X.default,this.rawIndexes=new Map,this.rawDatabase=e,this.keyGenerator=!0===n?new oe.default:null,this.deleted=!1,this.name=t,this.keyPath=r,this.autoIncrement=n}return e.prototype.getKey=function(e){var t=this.records.get(e);return void 0!==t?V.default(t.key):void 0},e.prototype.getAllKeys=function(e,t){var n,o;void 0!==t&&0!==t||(t=1/0);var i=[];try{for(var u=r(this.records.values(e)),a=u.next();!a.done;a=u.next()){var s=a.value;if(i.push(V.default(s.key)),i.length>=t)break}}catch(e){n={error:e}}finally{try{a&&!a.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return i},e.prototype.getValue=function(e){var t=this.records.get(e);return void 0!==t?V.default(t.value):void 0},e.prototype.getAllValues=function(e,t){var n,o;void 0!==t&&0!==t||(t=1/0);var i=[];try{for(var u=r(this.records.values(e)),a=u.next();!a.done;a=u.next()){var s=a.value;if(i.push(V.default(s.value)),i.length>=t)break}}catch(e){n={error:e}}finally{try{a&&!a.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return i},e.prototype.storeRecord=function(e,t,n){var o,i;var u=this;if(null!==this.keyPath){var a=U.default(this.keyPath,e.value);void 0!==a&&(e.key=a)}if(null!==this.keyGenerator&&void 0===e.key){if(n){var s=this.keyGenerator.num;n.push((function(){u.keyGenerator&&(u.keyGenerator.num=s)}))}if(e.key=this.keyGenerator.next(),null!==this.keyPath){if(Array.isArray(this.keyPath))throw new Error("Cannot have an array key path in an object store with a key generator");var c=this.keyPath;var l=e.value;var f=void 0;var d=0;for(;d>=0;){if("object"!=typeof l)throw new N.DataError;(d=c.indexOf("."))>=0&&(f=c.slice(0,d),c=c.slice(d+1),l.hasOwnProperty(f)||(l[f]={}),l=l[f])}l[f=c]=e.key}}else null!==this.keyGenerator&&"number"==typeof e.key&&this.keyGenerator.setIfLarger(e.key);if(this.records.get(e.key)){if(t)throw new N.ConstraintError;this.deleteRecord(e.key,n)}this.records.add(e),n&&n.push((function(){u.deleteRecord(e.key)}));try{for(var h=r(this.rawIndexes.values()),p=h.next();!p.done;p=h.next()){var v=p.value;v.initialized&&v.storeRecord(e)}}catch(e){o={error:e}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}return e.key},e.prototype.deleteRecord=function(e,t){var n,o,i,u;var a=this;var s=this.records.delete(e);if(t){var c=function(e){t.push((function(){a.storeRecord(e,!0)}))};try{for(var l=r(s),f=l.next();!f.done;f=l.next())c(f.value)}catch(e){n={error:e}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}}try{for(var d=r(this.rawIndexes.values()),h=d.next();!h.done;h=d.next())h.value.records.deleteByValue(e)}catch(e){i={error:e}}finally{try{h&&!h.done&&(u=d.return)&&u.call(d)}finally{if(i)throw i.error}}},e.prototype.clear=function(e){var t,n,o,i;var u=this;var a=this.records.clear();if(e){var s=function(t){e.push((function(){u.storeRecord(t,!0)}))};try{for(var c=r(a),l=c.next();!l.done;l=c.next())s(l.value)}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}}try{for(var f=r(this.rawIndexes.values()),d=f.next();!d.done;d=f.next())d.value.records.clear()}catch(e){o={error:e}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}},e}();t.default=n}));var ue=T((function(e,t){var r=F&&F.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});var n;var o=F&&F.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){if(!e._runningVersionchangeTransaction)throw new N.InvalidStateError;var t=e._rawDatabase.transactions.filter((function(e){return"versionchange"===e.mode}));var r=t[t.length-1];if(!r||"finished"===r._state)throw new N.InvalidStateError;if("active"!==r._state)throw new N.TransactionInactiveError;return r};var u=function(e){e._closePending=!0,e._rawDatabase.transactions.every((function(e){return"finished"===e._state}))?(e._closed=!0,e._rawDatabase.connections=e._rawDatabase.connections.filter((function(t){return e!==t}))):setImmediate((function(){u(e)}))};var a=function(e){function t(t){var r=e.call(this)||this;return r._closePending=!1,r._closed=!1,r._runningVersionchangeTransaction=!1,r._rawDatabase=t,r._rawDatabase.connections.push(r),r.name=t.name,r.version=t.version,r.objectStoreNames=G.default(Array.from(t.rawObjectStores.keys())).sort(),r}return r(t,e),t.prototype.createObjectStore=function(e,t){var r=this;if(void 0===t&&(t={}),void 0===e)throw new TypeError;var n=i(this);var o=null!==t&&void 0!==t.keyPath?t.keyPath:null;var u=null!==t&&void 0!==t.autoIncrement&&t.autoIncrement;if(null!==o&&ee.default(o),this._rawDatabase.rawObjectStores.has(e))throw new N.ConstraintError;if(u&&(""===o||Array.isArray(o)))throw new N.InvalidAccessError;var a=this.objectStoreNames.slice();n._rollbackLog.push((function(){var t=r._rawDatabase.rawObjectStores.get(e);t&&(t.deleted=!0),r.objectStoreNames=G.default(a),n._scope.delete(e),r._rawDatabase.rawObjectStores.delete(e)}));var s=new ie.default(this._rawDatabase,e,o,u);return this.objectStoreNames.push(e),this.objectStoreNames.sort(),n._scope.add(e),this._rawDatabase.rawObjectStores.set(e,s),n.objectStoreNames=G.default(this.objectStoreNames.slice()),n.objectStore(e)},t.prototype.deleteObjectStore=function(e){var t=this;if(void 0===e)throw new TypeError;var r=i(this);var n=this._rawDatabase.rawObjectStores.get(e);if(void 0===n)throw new N.NotFoundError;this.objectStoreNames=G.default(this.objectStoreNames.filter((function(t){return t!==e}))),r.objectStoreNames=G.default(this.objectStoreNames.slice()),r._rollbackLog.push((function(){n.deleted=!1,t._rawDatabase.rawObjectStores.set(e,n),t.objectStoreNames.push(e),t.objectStoreNames.sort()})),n.deleted=!0,this._rawDatabase.rawObjectStores.delete(e),r._objectStoresCache.delete(e)},t.prototype.transaction=function(e,t){var r,n;var i=this;if("readonly"!==(t=void 0!==t?t:"readonly")&&"readwrite"!==t&&"versionchange"!==t)throw new TypeError("Invalid mode: "+t);if(this._rawDatabase.transactions.some((function(e){return"active"===e._state&&"versionchange"===e.mode&&e.db===i})))throw new N.InvalidStateError;if(this._closePending)throw new N.InvalidStateError;if(Array.isArray(e)||(e=[e]),0===e.length&&"versionchange"!==t)throw new N.InvalidAccessError;try{for(var u=o(e),a=u.next();!a.done;a=u.next()){var s=a.value;if(this.objectStoreNames.indexOf(s)<0)throw new N.NotFoundError("No objectStore named "+s+" in this database")}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}var c=new ne.default(e,t,this);return this._rawDatabase.transactions.push(c),this._rawDatabase.processTransactions(),c},t.prototype.close=function(){u(this)},t.prototype.toString=function(){return"[object IDBDatabase]"},t}($.default);t.default=a}));var ae=T((function(e,t){var r=F&&F.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});var n;Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onupgradeneeded=null,t.onblocked=null,t}return r(t,e),t.prototype.toString=function(){return"[object IDBOpenDBRequest]"},t}(H.default);t.default=o}));var se=T((function(e,t){var r=F&&F.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});var n;Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,r){void 0===r&&(r={});var n=e.call(this,t)||this;return n.newVersion=void 0!==r.newVersion?r.newVersion:null,n.oldVersion=void 0!==r.oldVersion?r.oldVersion:0,n}return r(t,e),t.prototype.toString=function(){return"[object IDBVersionChangeEvent]"},t}(re.default);t.default=o}));var ce=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.deletePending=!1,this.transactions=[],this.rawObjectStores=new Map,this.connections=[],this.name=e,this.version=t,this.processTransactions=this.processTransactions.bind(this)}return e.prototype.processTransactions=function(){var e=this;setImmediate((function(){if(!e.transactions.some((function(e){return e._started&&"finished"!==e._state}))){var t=e.transactions.find((function(e){return!e._started&&"finished"!==e._state}));t&&(t.addEventListener("complete",e.processTransactions),t.addEventListener("abort",e.processTransactions),t._start())}}))},e}();t.default=r}));var le=T((function(e,t){var r=F&&F.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var n=F&&F.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r,n){r.some((function(e){return!e._closed&&!e._closePending}))?setImmediate((function(){return o(e,t,r,n)})):(e.delete(t),n(null))};var i=function(e,t,n,o,i){var u=e.get(t);if(void 0===u&&(u=new ce.default(t,0),e.set(t,u)),void 0===n&&(n=0!==u.version?u.version:1),u.version>n)return i(new N.VersionError);var a=new ue.default(u);u.version<n?function(e,t,n,o){var i,u;e._runningVersionchangeTransaction=!0;var a=e.version;var s=e._rawDatabase.connections.filter((function(t){return e!==t}));try{for(var c=r(s),l=c.next();!l.done;l=c.next()){var f=l.value;if(!f._closed&&!f._closePending){var d=new se.default("versionchange",{newVersion:t,oldVersion:a});f.dispatchEvent(d)}}}catch(e){i={error:e}}finally{try{l&&!l.done&&(u=c.return)&&u.call(c)}finally{if(i)throw i.error}}if(s.some((function(e){return!e._closed&&!e._closePending}))){var h=new se.default("blocked",{newVersion:t,oldVersion:a});n.dispatchEvent(h)}var p=function(){if(s.some((function(e){return!e._closed&&!e._closePending})))setImmediate(p);else{e._rawDatabase.version=t,e.version=t;var r=e.transaction(e.objectStoreNames,"versionchange");n.result=e,n.readyState="done",n.transaction=r,r._rollbackLog.push((function(){e._rawDatabase.version=a,e.version=a}));var i=new se.default("upgradeneeded",{newVersion:t,oldVersion:a});n.dispatchEvent(i),r.addEventListener("error",(function(){e._runningVersionchangeTransaction=!1})),r.addEventListener("abort",(function(){e._runningVersionchangeTransaction=!1,n.transaction=null,setImmediate((function(){o(new N.AbortError)}))})),r.addEventListener("complete",(function(){e._runningVersionchangeTransaction=!1,n.transaction=null,setImmediate((function(){e._closePending?o(new N.AbortError):o(null)}))}))}};p()}(a,n,o,(function(e){if(e)return i(e);i(null,a)})):i(null,a)};var u=function(){function e(){this.cmp=k.default,this._databases=new Map}return e.prototype.deleteDatabase=function(e){var t=this;var n=new ae.default;return n.source=null,setImmediate((function(){var i=t._databases.get(e);var u=void 0!==i?i.version:0;!function(e,t,n,i){var u,a;try{var s=e.get(t);if(void 0===s)return void i(null);s.deletePending=!0;var c=s.connections.filter((function(e){return!e._closed&&!e._closePending}));try{for(var l=r(c),f=l.next();!f.done;f=l.next()){var d=f.value;if(!d._closePending){var h=new se.default("versionchange",{newVersion:null,oldVersion:s.version});d.dispatchEvent(h)}}}catch(e){u={error:e}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(u)throw u.error}}var p=c.some((function(e){return!e._closed&&!e._closePending}));if(n&&p){var v=new se.default("blocked",{newVersion:null,oldVersion:s.version});n.dispatchEvent(v)}o(e,t,c,i)}catch(e){i(e)}}(t._databases,e,n,(function(e){if(e){n.error=new Error,n.error.name=e.name,n.readyState="done";var t=new re.default("error",{bubbles:!0,cancelable:!0});return t.eventPath=[],void n.dispatchEvent(t)}n.result=void 0,n.readyState="done";var r=new se.default("success",{newVersion:null,oldVersion:u});n.dispatchEvent(r)}))})),n},e.prototype.open=function(e,t){var r=this;if(arguments.length>1&&void 0!==t&&(t=W.default(t,"MAX_SAFE_INTEGER")),0===t)throw new TypeError;var n=new ae.default;return n.source=null,setImmediate((function(){i(r._databases,e,t,n,(function(e,t){if(e){n.result=void 0,n.readyState="done",n.error=new Error,n.error.name=e.name;var r=new re.default("error",{bubbles:!0,cancelable:!0});return r.eventPath=[],void n.dispatchEvent(r)}n.result=t,n.readyState="done";var o=new re.default("success");o.eventPath=[],n.dispatchEvent(o)}))})),n},e.prototype.databases=function(){var e=this;return new Promise((function(t){var o,i;var u=[];try{for(var a=r(e._databases),s=a.next();!s.done;s=a.next()){var c=n(s.value,2),l=c[0],f=c[1];u.push({name:l,version:f.version})}}catch(e){o={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}t(u)}))},e.prototype.toString=function(){return"[object IDBFactory]"},e}();t.default=u}));var fe=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=new le.default;t.default=r}));var de=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),e.exports=fe.default}));var he=I(de);class pe{constructor(e="keyval-store",t="keyval"){this.storeName=t,this._dbp=new Promise(((r,n)=>{const o=("undefined"==typeof window?he:window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB).open(e,1);o.onerror=()=>n(o.error),o.onsuccess=()=>r(o.result),o.onupgradeneeded=()=>{o.result.createObjectStore(t)}}))}withIDBStore(e,t){return this._dbp.then((r=>new Promise(((n,o)=>{const i=r.transaction(this.storeName,e);i.oncomplete=()=>n(),i.onabort=()=>o(i.error),i.onerror=()=>o(i.error),t(i.objectStore(this.storeName))}))))}}let ve;function ye(){return ve||(ve=new pe),ve}function be(e,t=ye()){let r;return t.withIDBStore("readonly",(t=>{r=t.get(e)})).then((()=>r.result))}function we(e,t,r=ye()){return r.withIDBStore("readwrite",(r=>{r.put(t,e)}))}function _e(e){if(!/^[0-9A-Fa-f]{64}$/.test(e))throw new Error("Invalid txId: "+e)}function ge(e){if(!/^[0-9A-Fa-f]{64}:\d+$/.test(e))throw new Error("Invalid outId: "+e)}function me(e){ge(e);const[t,r]=e.split(":");return{txId:t,virtualIndex:parseInt(r,10)}}class Ae{constructor(e=d.CHAIN,t=d.NETWORK,r=d.WOC_API_KEY){this.chain=e,this.network=t,"BSV"===e&&(this.wocApiKey=r),this.bcx=new C(this.getBaseUrl(),this.getRequestHeaders()),this.bbs=new C(d.UN_P2SH_URL),this.rawTxStore=new pe("rawTxsDb","rawTxs"),this.outputDataStore=new pe("outputDataDb","outputData")}getBaseUrl(){if("BSV"===this.chain)return"https://api.whatsonchain.com/v1/bsv/"+("livenet"===this.network?"main":"test");if("BCH"===this.chain)return`https://${"livenet"===this.network?"rest":"trest"}.bitcoin.com/v2`;throw new Error("Illegal state")}getRequestHeaders(){if("BSV"===this.chain)return this.wocApiKey?{"woc-api-key":this.wocApiKey}:{};if("BCH"===this.chain)return{};throw new Error("Illegal state")}getBalance(e){return n(this,void 0,void 0,(function*(){if("BSV"===this.chain){const t=yield this.bcx.get(`/address/${e.toString()}/balance`);return t.confirmed+t.unconfirmed}if("BCH"===this.chain){const t=yield this.bcx.get("/address/details/"+e.toString());return t.balanceSat+t.unconfirmedBalanceSat}throw new Error("Illegal state")}))}getTransaction(e){return n(this,void 0,void 0,(function*(){return new D(yield this.getRawTransaction(e))}))}getRawTransaction(e){return n(this,void 0,void 0,(function*(){_e(e);let t=yield be(e,this.rawTxStore);if(!t){const r="livenet"===this.network?"main":"test";t=yield this.bbs.get(`/tx/${this.chain}/${r}/${e}`),we(e,t,this.rawTxStore)}return t}))}getTransactions(e){return n(this,void 0,void 0,(function*(){return(yield this.getRawTransactions(e)).map((e=>new D(e)))}))}getRawTransactions(e){return n(this,void 0,void 0,(function*(){e.map(_e);const t=Array();const r=new Array;for(let n=0;n<e.length;n+=1){const o=e[n];const i=yield be(o,this.rawTxStore);i?r.push([o,i]):t.push(o)}if(0===t.length)return r.map((e=>e[1]));const n="livenet"===this.network?"main":"test";const o=(yield this.bbs.post(`/tx-bulk/${this.chain}/${n}`,{txIds:t})).map(((e,r)=>[t[r],e]));const i=new Map(r.concat(o));return e.map((e=>i.get(e)))}))}sendTransaction(e){return n(this,void 0,void 0,(function*(){if("BSV"===this.chain)return this.bcx.post("/tx/raw",{txhex:e});if("BCH"===this.chain){const[t]=yield this.bcx.post("/rawtransactions/sendRawTransaction",{hexes:[e]});return t}throw new Error("Illegal state")}))}getUtxosFromAddress(e){return n(this,void 0,void 0,(function*(){if("BSV"===this.chain){const t=(yield this.bcx.get(`/address/${e.toString()}/unspent`)).map((e=>({txId:e.tx_hash,vout:e.tx_pos,amount:e.value/1e8,satoshis:e.value})));const r=[...new Set(t.map((e=>e.txId)))];const o=yield this.getTransactions(r);const i=new Map(o.map((e=>[e.id,e])));return Promise.all(t.map((e=>n(this,void 0,void 0,(function*(){const t=i.get(e.txId).outputs[e.vout].script.toHex();return Object.assign(Object.assign({},e),{scriptPubKey:t})})))))}if("BCH"===this.chain){const{utxos:t,scriptPubKey:r}=yield this.bcx.get("/address/utxo/"+e.toString());return t.map((e=>({txId:e.txid,vout:e.vout,scriptPubKey:r,amount:e.amount,satoshis:e.satoshis,height:e.height,confirmations:e.confirmations})))}throw new Error("Illegal state")}))}getTxosFromOutputData(e){return n(this,void 0,void 0,(function*(){const t=e.map((e=>{const t=e.__txId;if(!t)throw new Error("Missing __txId");return t}));const r=[...new Set(t)];const n=yield this.getTransactions(r);const o=new Map(n.map((e=>[e.id,e])));return e.map((e=>{const t=e.__txId;if(!t)throw new Error("Missing __txId");const r=e.__vouts;if(!r)throw new Error("Missing __vouts");const n=o.get(t);if(!n)throw new Error("Illegal state");return r.map((e=>{const r=n.outputs[e];const o=r._scriptBuffer.toString("hex");const i=r._satoshis;return{txId:t,vout:e,scriptPubKey:o,satoshis:i,amount:i/1e8}}))}))}))}postOutputData(e){return n(this,void 0,void 0,(function*(){return this.bbs.post("/postOutputData",e)}))}getOutputData(e){return n(this,void 0,void 0,(function*(){let t=yield be(e,this.outputDataStore);function r(e){return new S(e)}return t||(t=yield this.bbs.get("/un-p2sh/"+e),we(e,t,this.outputDataStore)),t.map((e=>Object.assign(Object.assign({},e),{_owners:e._owners?e._owners.map(r):void 0})))}))}getOutputDatas(e){return n(this,void 0,void 0,(function*(){function t(e){return new S(e)}return(yield this.bbs.post("/un-p2sh-bulk",{txIds:e})).map((e=>e.map((e=>Object.assign(Object.assign({},e),{_owners:e._owners?e._owners.map(t):void 0})))))}))}getOwnedRevs(e){return n(this,void 0,void 0,(function*(){return this.bbs.get("/txos/"+e.toString())}))}getLatestRev(e){return n(this,void 0,void 0,(function*(){ge(e);const[{rev:t}]=yield this.bbs.get("/get-rev/"+e);return t}))}getLatestRevs(e){return n(this,void 0,void 0,(function*(){return e.map(ge),e.map(ge),yield this.bbs.post("/get-revs",{ids:e})}))}setTxoSpent(e){return n(this,void 0,void 0,(function*(){const t=me(e);this.bbs.post("/txos/set-spent/",t)}))}}function Ee(e,t){const r=[];let n=0;for(;n<e.length;){const o=n+t;r.push(e.slice(n,o)),n=o}return r}function Oe(e,t){const r=t.length;if(r>16)throw new Error("Too many owners");const n=new j;n.add("OP_1");for(const e of t)n.add(e.toBuffer());return n.add("OP_"+r),n.add("OP_CHECKMULTISIG"),n.add(e),n.add("OP_DROP"),n}function Se(e){const t=e.chunks.length;return!!(t>=5&&e.chunks[0].opcodenum===m.OP_1&&e.chunks[1].buf&&[20,33].includes(e.chunks[1].buf.length)&&e.chunks[t-3].opcodenum===m.OP_CHECKMULTISIG&&e.chunks[t-2].buf&&e.chunks[t-1].opcodenum===m.OP_DROP)}function je(e){const{_owners:t,_amount:n,__vouts:o,__txId:i}=e,u=r(e,["_owners","_amount","__vouts","__txId"]);const a=Ee(Buffer.from(JSON.stringify(u)),d.SCRIPT_CHUNK_SIZE);if(a[a.length-1].byteLength>=d.SCRIPT_CHUNK_SIZE){const e=a.pop();if(!e)throw new Error("Illegal state");const t=Ee(e,d.SCRIPT_CHUNK_SIZE);for(const e of t)a.push(e)}return a.map((e=>({redeemScript:Oe(e,t||[]),chunk:e})))}function De(e){if(Se(e))return e.chunks.slice(1,e.chunks.length-4).map((e=>{if(!e.buf)throw new Error("Illegal state");return new S(e.buf)}));throw new Error("Cannot get owners from non-data script")}function xe(e){if(Se(e)){const t=e.chunks[e.chunks.length-2];if(!t.buf)throw new Error("Illegal state");return JSON.parse(t.buf.toString())}return{}}function Be(e){return!(3!==e.chunks.length||e.chunks[0].opcodenum!==m.OP_0||!e.chunks[1].buf||!e.chunks[2].buf)}function Ce(e){if(!Be(e))throw new Error("not a p2sh script");return new j(e.chunks[2].buf)}function Fe(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1)if(e[r]!==t[r])return!1;return!0}function Ie(e){return new Promise((t=>setTimeout(t,e)))}function Te(e){const t=e.map((e=>{const t=e.chunks[e.chunks.length-2];if(!t.buf)throw new Error("Illegal state");return t.buf}));const r=Buffer.concat(t);const n=JSON.parse(r.toString());return Object.assign({_owners:De(e[0]),_amount:d.MIN_NON_DUST_AMOUNT},n)}function Pe(e){const t=[];let r=0;return e.forEach((e=>{const n=[];const o=je(e).length;for(let e=0;e<o;e+=1)n.push(r),r+=1;const i=Object.assign({},e);i.__vouts=n,t.push(i)})),t}class Ne{constructor(e,t,r){const n=new D(r);n.feePerKb(d.DEFAULT_FEE),this.restClient=new Ae(e,t),this._tx=n,this._outputData=[]}get chain(){return this.restClient.chain}get network(){return this.restClient.network}get dataInputs(){const e=[];for(let t=0;t<this.tx.inputs.length;t+=1){const r=this.tx.inputs[t];const n=new j(r._scriptBuffer);if(Be(n)){const r=[Ce(n)];for(;;)try{const t=Te(r);e.push(t);break}catch(e){if(t+=1,t===this.tx.inputs.length)throw new Error("Could not compute data inputs");const n=this.tx.inputs[t];const o=new j(n._scriptBuffer);r.push(Ce(o))}}}return e}getVirtualInputs(){return n(this,void 0,void 0,(function*(){if("BSV"===this.chain)return(yield Promise.all(this.tx.inputs.map((e=>n(this,void 0,void 0,(function*(){const{outputIndex:t}=e;const r=e.prevTxId.toString("hex");const n=new Ne(this.chain,this.network);yield n.fromTxId(r);const o=n.tx.outputs[t];return Se(new j(o._scriptBuffer))?e:null})))))).filter((e=>null!==e)).map((e=>{if(null===e)throw new Error("Illegal state");return`${e.prevTxId.toString("hex")}:${e.outputIndex}`}));if("BCH"===this.chain){const e=Pe(this.dataInputs);return Promise.all(e.map((e=>n(this,void 0,void 0,(function*(){const t=[];e.__vouts&&e.__vouts.forEach((e=>{t.push(this.tx.inputs[e])}));const r=t[0].prevTxId.toString("hex");const n=new Ne(this.chain,this.network);yield n.fromTxId(r),yield n.fetchOutputData();const o=Pe(n.outputData);const i=[];return o.forEach(((e,r)=>{Fe(e.__vouts||[],t.map((e=>e.outputIndex)))&&i.push(r)})),`${r}:${i[0]}`})))))}throw new Error("Illegal state")}))}fromDataOutput(e,t){const r=je(t);const{_owners:n}=t;return r.forEach((({redeemScript:t},r)=>{const{scriptPubKey:o,satoshis:i,txId:u,vout:a}=e[r];const s=new E({script:new j(o),satoshis:i});const c=new j;const l=new _({prevTxId:u,output:s,outputIndex:a,script:c},n||[],1,null,t);this.tx.addInput(l)})),this}get tx(){return this._tx}get outputData(){if("BSV"===this.chain)return this.tx.outputs.filter((e=>Se(new j(e._scriptBuffer)))).map((e=>{const{chunks:t}=e._script||e.script;const{buf:r}=t[t.length-2];if(!r)throw new Error("Illegal state");const n=JSON.parse(r.toString());const o=t.slice(1,t.length-4);return n._owners=o.map((e=>{if(!e.buf)throw new Error("Illegal state");return new S(e.buf)})),n._amount=e._satoshis,n}));if("BCH"===this.chain)return this._outputData;throw new Error("Illegal state")}toData(e){if("BSV"===this.chain){const{_owners:t,_amount:n}=e,o=r(e,["_owners","_amount"]);const i=Oe(Buffer.from(JSON.stringify(o)),t||[]);const u=new E({script:i,satoshis:n||0});return this.tx.addOutput(u),this.tx.outputs.length-1}if("BCH"===this.chain){const t=je(e);return this._outputData.push(e),t.forEach((({redeemScript:t})=>{const r=j.buildScriptHashOut(t);const n=e._amount||0;const o=new E({script:r,satoshis:n});this.tx.addOutput(o)})),this._outputData.length-1}throw new Error("Illegal state")}fetchOutputData(){return n(this,void 0,void 0,(function*(){if(this._outputData.length>0)return;const e=this.getTxId();if("BSV"!==this.chain){if("BCH"!==this.chain)throw new Error("Illegal state");this._outputData=yield this.restClient.getOutputData(e)}else this._outputData=this.tx.outputs.map((e=>{const t=new j(e._scriptBuffer);const r=e._satoshis;if(Se(t)){const e=xe(t);return e._owners=De(t),e._amount=r,e}if(t.isPublicKeyHashOut()){const e=t.getPublicKeyHash();return{address:h.fromPublicKeyHash(e)}}throw new Error("Unrecognized output script "+t.toString())}))}))}getTxId(){return new v(this.tx._getHash()).readReverse().toString("hex")}fromTxId(e){return n(this,void 0,void 0,(function*(){let t;try{t=yield this.restClient.getRawTransaction(e)}catch(r){yield Ie(3e3),t=yield this.restClient.getRawTransaction(e)}return this.tx.fromString(t),this}))}}const Re=()=>"__temp__:"+Math.random();const ke=["_id","_rev","_owners","_amount","__vouts","__txId","__cls","__func","__index","__args"];const Me=e=>(Object.prototype.toString.call(e).match(/\s([a-zA-Z]+)/)||[])[1];const Ue=e=>"object"==typeof e?Me(e):Me(e).toLowerCase();const Ke=e=>["number","string","boolean","undefined","Null"].includes(Ue(e));const Ve=e=>"Array"===Ue(e);const Le=e=>"Object"===Ue(e);const qe=e=>!!e._owners&&"string"==typeof e._owners;const $e=e=>Ke(e)||["Array","Object"].includes(Ue(e));const He=e=>"Object"===Ue(e)&&Object.keys(e).every((e=>!Number.isNaN(parseInt(e,10))));const We=(e,t)=>{if(!$e(e)||!$e(t))throw new Error(`Unsupported data types for deep equals: ${Ue(e)} & ${Ue(t)}`);if(Ue(e)!==Ue(t))return!1;if(Ke(e)&&Ke(t))return e===t;const r=(e,t)=>Object.entries(e).every((([e,r])=>We(t[e],r)));return e&&t&&r(e,t)&&r(t,e)};const Ge=e=>{if(Ke(e))return e;if(Ve(e))return e.map(Ge);if(Le(e)){const t=Object.keys(e).reduce(((t,r)=>(t[r]=Ge(e[r]),t)),{});const r=Object.create(Object.getPrototypeOf(e));return Object.assign(r,t)}throw new Error("Unsupported data type for clone: "+Ue(e))};const Je=(e,t)=>e.reduce((([e,r],n,o)=>t(n,o)?[[...e,n],r]:[e,[...r,n]]),[[],[]]);const ze=(e,t)=>Object.fromEntries(Object.entries(e).map((e=>t(e))));const Ye=(e,t)=>ze(e,(([e,r])=>[e,t(r)]));const Ze=(e,t)=>Object.fromEntries(Object.entries(e).filter((([,e])=>t(e))));const Xe=(e,t,r,n)=>{if(Ke(e))return e;if(Ve(e))return e.map((e=>Xe(e,t,r,n)));if(Le(e)){e._rev=`${n}:${r}`;const o=t[r];return Object.entries(e).forEach((([r,i])=>{"object"==typeof o&&Object.keys(o).includes(r)&&(e[r]=Xe(i,t,o[r],n))})),e}throw new Error(`Unsupported type ${Ue(e)} in deep.updateRev`)};const Qe=e=>{if(Ke(e))return e;if(Ve(e))return e.map((e=>Qe(e)));if(Le(e))return e.__cls=e.constructor.toString(),Object.entries(e).forEach((([t,r])=>{e[t]=Qe(r)})),e;throw new Error(`Unsupported type ${Ue(e)} in deep.addClass`)};const et=(e,t)=>{if(Ke(e))return e;if(Ve(e))return e.map((e=>et(e,t)));if(Le(e))return e._id=!e._id||e._id.startsWith("__temp__")?e._rev:e._id,e._rootId=e._rootId||t,Object.entries(e).forEach((([r,n])=>{e[r]=et(n,t)})),e;throw new Error(`Unsupported type ${Ue(e)} in deep.addId`)};const tt=e=>{if(Ke(e))return e;if(Ve(e))return e.map((e=>tt(e)));if(Le(e)){const t=Re();return e._id=e._id||t,e._rev=e._rev||t,Object.values(e).map((e=>tt(e))),e}throw new Error(`Unsupported type ${Ue(e)} in addRandomId`)};const rt=e=>{if(Ke(e))return e;if(Ve(e))return e.map((e=>rt(e)));if(Le(e))return ze(e,(([e,t])=>"_owners"===e?[e,JSON.stringify(t)]:Ke(t)?[e,t]:[e,rt(t)]));throw new Error(`Unexpected type ${Ue(e)} in stringifyOwners`)};const nt=e=>qe(e)?Object.assign(Object.assign({},e),{_owners:JSON.parse(e._owners).map((e=>new S(e)))}):e;const ot=e=>{if(Ke(e))return e;if(Ve(e)||Le(e))return Object.entries(e).reduce(((e,[t,r])=>{const n=ot(r);return He(n)?Object.entries(n).forEach((([r,n])=>{e[`${t}_${r}`]=n})):e[t]=n,e}),{});throw new Error(`Unsupported type ${Ue(e)} in encodeArraysAsObjects`)};const it=e=>{const t={[e._id]:Object.entries(e).reduce(((e,[t,r])=>ke.includes(t)?Object.assign(Object.assign({},e),{[t]:r}):Ke(r)?Object.assign(Object.assign({},e),{["__basic__"+t]:r}):Object.assign(Object.assign({},e),{[t]:r._id})),{})};return Object.values(e).filter((e=>!Ke(e))).reduce(((e,t)=>Object.assign(Object.assign({},e),it(t))),t)};const ut=e=>Object.fromEntries(Object.entries(e).filter((([e])=>!e.startsWith("__basic__"))));const at=(e,t)=>Object.fromEntries(Object.entries(t).map((([t,r])=>{const n=e[t];var o;return r.__change=(o=n)?We(o,r)?"same":"diff":"new",[t,r]})));const st=(e,t)=>(e[t].__contains=Object.entries(e[t]).reduce(((t,[r,n])=>["__contains"].concat(ke).includes(r)?t:"__change"===r?"new"===n||"diff"===n||t:st(e,n)[n].__contains||t),!1),e);const ct=e=>e.reduce(((e,t,r)=>Object.assign(Object.assign({},e),{[t._id]:r})),{});const lt=(e,t)=>e.map((e=>Object.entries(e).reduce(((e,[r,n])=>{const o="string"==typeof n&&"undefined"!==Ue(t[n])?t[n]:n;return Object.assign(Object.assign({},e),{[r]:o})}),{})));const ft=(e,t,n)=>{const[o,...i]=[t,...e].map(((e,t)=>{const o=r(e,["_id","_rev","__change","__contains"]);return 0===t||t<=n.length?r(o,["__cls"]):o}));return[o,...i.map((e=>Object.fromEntries(Object.entries(e).filter((([e,t])=>ke.filter((e=>"__cls"!==e)).includes(e)||"__cls"===e&&"string"==typeof t&&"function Object() { [native code] }"!==t||"number"==typeof t)))))]};const dt=(e,t)=>{const r=tt(t);const n=r._id;const o=Ge(e);const i=Ge(r);Qe(o),Qe(i);const u=rt(o);const a=rt(i);const s=ot(u);const c=ot(a);const l=it(s);const f=it(c);const d=at(l,f);const h=Ye(d,ut);const p=st(h,n);const v=p[n];delete v.__cls,delete p[n];const y=Ye(p,(e=>e._rev));const b=Ze(p,(e=>e.__contains||Object.values(v).includes(e._id)));const w=Object.values(b);const[_,g]=Je(w,(e=>"new"===e.__change));const m=[...g,..._];const A=ct(m);const E=lt(m,A);const[O]=lt([v],A);const S=g.map((e=>e._rev));const[j,...D]=ft(E,O,S);return[S,D.map(nt).map((e=>Object.entries(e).reduce(((e,[t,r])=>Object.assign(Object.assign({},e),{[t]:y[r]||r})),{}))),j]};function ht(e,t){let r=0;return t.map((t=>"__"===t?e[r++]:t))}class pt{constructor(e,t){this.chain=e,this.network=t}get(e){return n(this,void 0,void 0,(function*(){const{txId:t,virtualIndex:r}=me(e);const n=new Ne(this.chain,this.network);yield n.fromTxId(t),yield n.fetchOutputData();const o=yield n.getVirtualInputs();const i=n.outputData;const u=i[0].__index||{};const a=i[u.obj].__cls||"";const s=i[u.obj].__func||"";const c=i[u.obj].__args||[];const l=yield Promise.all(Object.values(u).map((e=>{const t=o[e];return t?this.get(t):Promise.resolve({})})));const f=Object.keys(u).map(((e,t)=>[e,l[t]]));const d=Object.fromEntries(f);let h=d.obj;delete d.obj;const p=Object.entries(d).reduce(((e,[t,r])=>{const n=parseInt(t,10);return Number.isNaN(n)||(e[n]=r),e}),[]);const v=ht(p,c);let y;if("constructor"===s){const e=eval(`(${a})`);h=Reflect.construct(e,v)}else y=Reflect.apply(h[s].bind(h),h,v);Object.entries(u).forEach((([e,r])=>{const n=parseInt(e,10);let o=p[n];"obj"===e?o=h:"res"===e&&(o=y),Xe(o,i,r,t)}));const b=h._rootId||`${t}:${u.obj}`;return et([y,h,...p],b),[...p,h,y][r]}))}}function vt(e){return e.map((e=>{const{_owners:t}=e,n=r(e,["_owners"]);const o=Object.assign({},n);return t&&(o._owners=t.map((e=>"string"==typeof e?new S(e):e))),o}))}function yt(e,t,r){const n=Object.assign({},e);return n._owners||(n._owners=t),n._amount||(n._amount=r),n}class bt{constructor(e){this.wallet=e}get chain(){return this.wallet.chain}get network(){return this.wallet.network}put(e){return this.update([],e)}getTransactions(e){return n(this,void 0,void 0,(function*(){return yield this.wallet.restClient.getTransactions(e)}))}getOutputData(e){return n(this,void 0,void 0,(function*(){const t=[...new Set(e)];const r=yield this.wallet.restClient.getOutputDatas(t);const o=new Map(r.map(((e,r)=>[t[r],e])));const i=new Map;return yield Promise.all(t.map((e=>n(this,void 0,void 0,(function*(){const t=Pe(o.get(e));for(let r=0;r<t.length;r+=1)t[r].__txId=e;i.set(e,t)}))))),e.map((e=>{const t=i.get(e);if(!t)throw new Error("Illegal state");return t}))}))}get(e){return n(this,void 0,void 0,(function*(){const t=e.map(me);const r=t.map((e=>e.txId));if("BSV"===this.chain){const e=yield this.getTransactions(r);return t.map(((t,r)=>{const{txId:n,virtualIndex:o}=t;const i=e[r].outputs[o];const u=new j(i.script);const a=Math.round(i.satoshis);const s=xe(u);const c=De(u);const l=[o];return s.__txId=n,s.__vouts=l,s._owners=c,s._amount=a,s}))}if("BCH"===this.chain){const e=yield this.getOutputData(r);return t.map(((t,r)=>{const{virtualIndex:n}=t;return e[r][n]}))}throw new Error("Illegal state")}))}prepareTransactionFromBsv(e,t){return n(this,void 0,void 0,(function*(){const r=t.map(me);const n=r.map((e=>e.txId));const o=yield this.getTransactions(n);r.forEach(((t,r)=>{const{txId:n,virtualIndex:i}=t;const u=o[r].outputs[i];const a=new j(u.script);const s=Math.round(u.satoshis);const c=De(a);const l={txId:n,outputIndex:i,scriptPubKey:a,satoshis:s};e.tx.from(l,c,1)}))}))}prepareTransactionFromBch(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.get(t);const n=yield this.wallet.restClient.getTxosFromOutputData(r);r.forEach(((t,r)=>{e.fromDataOutput(n[r],t)}))}))}getUpdateTx(e,t){return n(this,void 0,void 0,(function*(){const r=new Ne(this.chain,this.network);if("BSV"===this.chain)yield this.prepareTransactionFromBsv(r,e);else{if("BCH"!==this.chain)throw new Error("Illegal state");yield this.prepareTransactionFromBch(r,e)}const n=[this.wallet.getPublicKey()];const o=d.MIN_NON_DUST_AMOUNT;const i=t.map((e=>yt(e,n,o))).map((e=>r.toData(e)));return{txId:yield this.wallet.fundAndSendTransaction(r,!0),virtualIndices:i}}))}update(e,t){return n(this,void 0,void 0,(function*(){const{txId:r,virtualIndices:n}=yield this.getUpdateTx(e,t);return n.map((e=>`${r}:${e}`))}))}}function wt(e){return{smartArgs:e.filter((e=>e._rev)),dumbArgs:e.map((e=>e._rev?"__":e))}}function _t(e){return n(this,void 0,void 0,(function*(){let t;let r;let n;let o;let i;let u;let a;if("Cls"in e){const{Cls:s,args:c}=e;t=s.toString(),r=null,n=Reflect.construct(s,c),o=Ge(c),i=c,u=null,a=void 0}else{const{target:s,property:c,args:l}=e;t=null,r=Ge(s),n=s,o=Ge(l),i=l,u=c,a=Reflect.apply(s[c],s,i)}const{smartArgs:s,dumbArgs:c}=wt(o);const{smartArgs:l}=wt(i);const f=Object.assign(Object.assign(Object.assign({},s),{obj:r}),{_id:"index"});const d=Object.assign(Object.assign(Object.assign({},l),{obj:n}),{_id:"index"});"Object"===Ue(a)&&(d.res=a);const[h,p,v]=dt(f,d);void 0!==p[0]&&(p[0].__index=v);const y=v.obj;return void 0!==p[y]&&(null!==t&&(p[y].__cls=t),p[y].__func=null===u?"constructor":String(u),p[y].__args=c),[h,p,n,l,a,v]}))}class gt{constructor(e){this.db=e}construct(e,t){return n(this,void 0,void 0,(function*(){const[r,n,o,i,,u]=yield _t({Cls:e,args:t});const[a]=yield this.db.update(r,vt(n));const{txId:s}=me(a);Object.entries(u).forEach((([e,t])=>{const r=parseInt(e,10);let u=i[r];"obj"===e&&(u=o),Xe(u,n,t,s)}));const c=`${s}:${u.obj}`;return et([o,...i],c),o}))}call(e,t,r){return n(this,void 0,void 0,(function*(){const[n,o,,i,u,a]=yield _t({target:e,property:t,args:r});const[s]=yield this.db.update(n,vt(o));const{txId:c}=me(s);Object.entries(a).forEach((([t,r])=>{const n=parseInt(t,10);let a=i[n];"obj"===t?a=e:"res"===t&&(a=u),Xe(a,o,r,c)}));const l="string"==typeof e._rootId?e._rootId:`${c}:${a.obj}`;return et([u,e,...i],l),u}))}get(e,t){return"function"==typeof e[t]?(...r)=>this.call(e,t,r):Reflect.get(e,t)}}function mt(e){const t=e;for(let e=t.length-1;e>0;e-=1){const r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}}class At{constructor(e,t,r={}){const{path:n="m/44'/0'/0'/0",passphrase:o=""}=r;let i=e.toHDPrivateKey(o,d.NETWORK);n&&(i=i.derive(n));const u=i.publicKey.toAddress(t.network);this.mnemonic=e,this.restClient=t,this.path=n,this.passphrase=o,this.hdPrivateKey=i,this.address=u,this.utxos=[],this.utoxsSyncing=!1,this.syncUtxos()}get chain(){return this.restClient.chain}get network(){return this.restClient.network}getMnemonic(){return this.mnemonic}getPath(){return this.path}getUtxos(){return this.utxos}derive(e="0"){const t=`${this.path}${this.path.length>0?"/":""}${e}`;return new At(this.mnemonic,this.restClient,{path:t})}getPrivateKey(){return this.hdPrivateKey.privateKey}getPublicKey(){return this.hdPrivateKey.publicKey}getAddress(){return this.address}syncUtxos(){return n(this,void 0,void 0,(function*(){this.utoxsSyncing=!0,this.utxos=yield this.restClient.getUtxosFromAddress(this.getAddress()),this.utoxsSyncing=!1}))}waitUntilSynced(){return n(this,void 0,void 0,(function*(){for(;this.utoxsSyncing;)yield Ie(300)}))}getBalance(){return n(this,void 0,void 0,(function*(){return this.restClient.getBalance(this.getAddress())}))}getBalanceLowerBounds(){return n(this,void 0,void 0,(function*(){return yield this.waitUntilSynced(),this.utxos.reduce(((e,t)=>e+t.satoshis),0)}))}getUtxosToSpend(e){return n(this,void 0,void 0,(function*(){return yield this.waitUntilSynced(),mt(this.utxos),this.getUtxosWithSatoshis(e)}))}getUtxosWithSatoshis(e){let t=0;const r=[];for(let n=0;n<this.utxos.length;n+=1){const o=this.utxos[n];if(t+=o.satoshis,r.push(o),t>=e)return r}throw new Error(`Insufficient balance in address ${this.getAddress().toString()} on ${d.NETWORK} ${d.CHAIN}. Found ${t}, required ${e}.`)}fundAndSendTransaction(e,t=!1){return n(this,void 0,void 0,(function*(){e.tx.feePerKb(d.DEFAULT_FEE);const r=e.tx._getInputAmount();let n=[];const o=e.tx._getOutputAmount()-r+(e.tx._estimateFee()+100);o>0&&(n=yield this.getUtxosToSpend(o),n.forEach((t=>{const{amount:r,satoshis:n,scriptPubKey:o,txId:i,vout:u}=t;e.tx.from({amount:r,satoshis:n,scriptPubKey:o,txId:i,vout:u})}))),e.tx.change(this.getAddress()),e.tx.sign(this.getPrivateKey());const i=yield this.restClient.sendTransaction(e.tx.toString());t&&(yield this.storeResult(i,e)),this.utxos=this.utxos.slice(n.length);const u=e.tx.getChangeOutput();if(u){const t=e.tx._changeIndex;const{satoshis:r}=u;const n=r/1e8;const o=u.script.toHex();this.utxos.push({txId:i,vout:t,satoshis:r,amount:n,scriptPubKey:o})}return i}))}storeResult(e,t){return n(this,void 0,void 0,(function*(){function r(e){return e.toString()}const n=t.outputData.map((e=>Object.assign(Object.assign({},e),{_owners:e._owners?e._owners.map(r):void 0})));const o=JSON.stringify(n);const i=t.tx.toJSON().inputs.map((e=>`${e.prevTxId}:${e.outputIndex}`));yield this.restClient.postOutputData({txId:e,outputData:o,inputs:i})}))}send(e,t){return n(this,void 0,void 0,(function*(){const r=new Ne(this.chain,this.network);return r.tx.to(t,e),this.fundAndSendTransaction(r)}))}}class Et{constructor(e={}){const t=e.chain||d.CHAIN;const r=e.network||d.CHAIN;const n=e.mnemonic||new b(e.seed);const o=e.path||"m/44'/0'/0'/0";const i=e.passphrase||"";if(!["BSV","BCH"].includes(t))throw new Error("Please set 'chain' to 'BSV' or 'BCH' when creating a computer instance");if(!["livenet","testnet"].includes(r))throw new Error("Please set 'network' to 'testnet' or 'livenet' when creating a computer instance");const u=new Ae(t,r,e.wocApiKey);const a=e.db||new bt(new At(n,u,{path:o,passphrase:i}));this.db=a}get chain(){return this.db.chain}get network(){return this.db.network}parseContract(e){const t=e.startsWith("export ")?e.slice(7):e;const r=t.startsWith("default ")?t.slice(8):t;return eval(`(${r})`)}new(e,t){return n(this,void 0,void 0,(function*(){const r=e.toString();const n=yield this.parseContract(r);const o=new gt(this.db);const i=yield o.construct(n,t);return new Proxy(i,o)}))}sync(e){return n(this,void 0,void 0,(function*(){ge(e);const t=new pt(this.chain,this.network);const r=new gt(this.db);const n=yield t.get(e);return new Proxy(n,r)}))}getOwnedRevs(e=this.db.wallet.getPublicKey()){return this.db.wallet.restClient.getOwnedRevs(e)}getRevs(e=this.db.wallet.getPublicKey()){return n(this,void 0,void 0,(function*(){return(yield this.getOwnedRevs(e)).map((({txId:e,virtualIndex:t})=>`${e}:${t}`))}))}getLatestRev(e){return this.db.wallet.restClient.getLatestRev(e)}getLatestRevs(e){return this.db.wallet.restClient.getLatestRevs(e)}}var Ot=(e,t,r)=>{const n=new Ne(e,t,r);const o=n.getTxId();function i(e){return e.toString()}const u=n.outputData.map((e=>Object.assign(Object.assign({},e),{_owners:e._owners?e._owners.map(i):void 0})));return{txId:o,outputData:JSON.stringify(u),inputs:n.tx.toJSON().inputs.map((e=>`${e.prevTxId}:${e.outputIndex}`))}};export default Et;export{Ot as parseOutputData};
